var zuix;!function(){var be={381:function(H){"use strict";const S="background-color:rgba(200,200,200,0.2);";let p=null,h=null,f=null;function r(s){p=window?window.console:{},h=window||{},this._timers={},this.args=function(l,b,v){let _="%c "+b+" %c"+(new Date).toISOString()+" %c"+l;const I=[S+"color:#8a53ff;",S+"color:#777777",S+"color:#888888;"];for(let x=0;x<v.length;x++)if("string"==typeof v[x]&&0===v[x].indexOf("timer:")){const e=v[x].split(":");if(3===e.length){let i;switch(e[2]){case"start":this._timers[e[1]]=(new Date).getTime(),_+=" %cSTART "+e[1],I.push(S+"color:#999900;");break;case"stop":i=(new Date).getTime()-this._timers[e[1]],_+=" %cSTOP "+e[1]+" "+i+" ms",I.push(i>200?S+"color:#ff0000;":i>100?S+"color:#ff7700;":S+"color:#00aa00;")}}}_+=" \n%c ",I.push("background-color:transparent;color:inherit;");for(let x=I.length-1;x>=0;x--)Array.prototype.unshift.call(v,I[x]);Array.prototype.unshift.call(v,_),Array.prototype.push.call(v,"\n\n")},this.log=function(l,b){f&&f.call(s,l,b),(h.__zuix__debug||"ERROR"===l||"WARN"===l)&&(this.args(s,l,b),p.log(...b))}}r.prototype.monitor=function(s){f=s},r.prototype.i=r.prototype.l=r.prototype.log=r.prototype.info=function(...s){return this.log("INFO",s),this},r.prototype.w=r.prototype.warn=function(...s){return this.log("WARN",s),this},r.prototype.e=r.prototype.error=function(...s){return this.log("ERROR",s),this},r.prototype.d=r.prototype.debug=function(...s){return this.log("DEBUG",s),this},r.prototype.t=r.prototype.trace=function(...s){return this.log("TRACE",s),this},H.exports=function(s){return new r(s)}},65:function(H,S,p){"use strict";const h=p(381)("TaskQueue.js");function f(r){const s=this;s._worker=null,s._taskList=[],s._requests=[],null==r&&(r=function(){}),s.taskQueue=function(l,b,v){s._taskList.push({tid:l,fn:b,status:0,priority:v,step:function(_){h.t(_,"load:step"),r(s,"load:step",{task:_})},end:function(){this.status=2,h.t(this.tid,"load:next","timer:task:stop"),r(s,"load:next",{task:this.tid}),s._taskList.splice(this.index,1),s.taskCheck(),null!=this._callback&&this._callback.call(this)},callback:function(_){this._callback=_}}),h.t(l,"task added",v,"priority"),s._taskList.sort(function(_,I){return _.priority>I.priority?1:I.priority>_.priority?-1:0}),s.taskCheck()},s.taskCheck=function(){for(let l=0;l<s._taskList.length;l++){if(0===s._taskList[l].status)return s._taskList[l].status=1,h.t(s._taskList[l].tid,"load:begin","timer:task:start"),r(s,"load:begin",{task:s._taskList[l].tid}),s._taskList[l].index=l,void s._taskList[l].fn.call(s._taskList[l]);if(1===s._taskList[l].status||2===s._taskList[l].status)return}h.t("load:end"),r(s,"load:end")}}f.prototype.callback=function(r){},f.prototype.queue=function(r,s,l){return this.taskQueue(r,s,l)},H.exports=f},826:function(H){"use strict";H.exports={isNoU:p=>null==p,propertyFromPath(p,h){if("string"!=typeof h||null==p)return;try{if(void 0!==p[h])return p[h]}catch(l){console.log(l)}let f=p,r="";const s=h.match(/\[(".*?"|'.*?'|(.*?))\]|".*?"|'.*?'|[0-9a-zA-Z_$]+/g);for(let l=0;l<s.length;l++){let b,v=s[l];v.startsWith("[")&&v.endsWith("]")&&(v=v.substring(1,v.length-1).trim()),(v.startsWith('"')&&v.endsWith('"')||v.startsWith("'")&&v.endsWith("'"))&&(v=v.substring(1,v.length-1)),r+=v;try{b=f[v]}catch{}if(void 0===b)return;f=b,r+="->"}return f},cloneObject(p){if(null===p||"object"!=typeof p)return p;let h=p;try{h=p.constructor();for(const f in p)p.hasOwnProperty(f)&&(h[f]=this.cloneObject(p[f]))}catch{}return h},hasPassiveEvents(){let p=!1;try{const h=Object.defineProperty({},"passive",{get:function(){p=!0}});window.addEventListener("testPassive",null,h),window.removeEventListener("testPassive",null,h)}catch{}return p},hyphensToCamelCase:p=>"string"==typeof p?p.replace(/--/g,":").replace(/-([a-z0-9_$-])/g,function(h){return"_$-".indexOf(h[1])>-1||(+h[1]).toString()===h[1]?"_"+h[1].replace("-","_"):h[1].toUpperCase()}).replace(/:/g,"-"):p,camelCaseToHyphens:p=>"string"!=typeof p?p:(p=p.replace(/(^\w)|(\s+\w)/g,function(h){return h.toUpperCase()}).replace(/\s/g,"")).split(/(?=[A-Z])/).join("-").toLowerCase(),normalizeControllerCode(p){if(p.indexOf("module.exports")>=0)return"'use strict'; let module = {}; "+p+";\nreturn module.exports;";{let h=p;const f=p.indexOf("function "),r=p.indexOf("zuix.controller"),s=p.indexOf("class ");return s>=0&&(s<f||-1===f)&&(s<r||-1===r)?h=p.substring(0,s)+"return "+p.substring(s):f>=0&&(f<r||-1===r)?h=p.substring(0,f)+"return "+p.substring(f):-1!==r&&(h=p.substring(0,r)+"return "+p.substring(r+15)),h}},catchContextError(p,h,f){try{h()}catch(r){p._error=r,f&&f(r),r&&p.options().error?p.options().error.call(p,r,p):console.error(r)}},dom:{queryAttribute(p,h,f){const r=p.split(/[\s|,]+/g);let s="";return r.forEach(function(l,b){s+=null!=h?"["+CSS.escape(l)+'="'+h+'"]':"["+CSS.escape(l)+"]",f&&(s+=f.get(b)),b<r.length-1&&(s+=",")}),s},getAttribute(p,h){let f;if("string"==typeof h&&-1!==h.indexOf(",")){const r=h.split(/[\s|,]+/g);for(let s=0;s<r.length;s++){const b=p.getAttribute(r[s]);if(null!=b){f=b;break}}}else f=p.getAttribute(h);return f},setAttribute(p,h,f){if("string"==typeof h&&-1!==h.indexOf(",")){const r=h.split(/[\s|,]+/g),s=this;r.forEach(function(l){s.setAttribute(p,l,f)})}else null===f?p.removeAttribute(h):p.getAttribute(h)!==f&&p.setAttribute(h,f)},cssNot(p,h){const f=p.split(",");let r="";return f.forEach(function(l,b){l.startsWith(".")?r+=":not("+l+")":r+=null!=h?":not(["+l+'="'+h+'"])':":not(["+l+"])",b<f.length-1&&(r+=",")}),s=r,{get(l){const b=s.split(",");return l>=b.length||null==l?b[0]:b[l]},getAll:()=>s.split(",").join("")};var s},getShadowRoot(p){for(;p;p=p.parentNode)if(p instanceof ShadowRoot)return p;return!1}}}},917:function(H,S,p){"use strict";const h=p(381)("TaskQueue.js"),f=p(826),r=f.hasPassiveEvents(),s=[];function l(e){!function(i,n,o){const u=x(i);x.each(s,function(){this.element===i&&this.path===n&&this.handler.call(u,o,u)})}(this,e.type,e)}function b(e,i,n){let o=1,u=-1;x.each(s,function(d){this.element===e&&this.path===i&&(o--,this.handler===n&&(u=d))}),-1!==u&&s.splice(u,1),0===o&&e.removeEventListener(i,l)}function v(e,i,n){let o=n.classes;return"string"==typeof n?(o=n.split(/[\s|,]+/g),n={}):Array.isArray(n)&&(o=n,n={}),Object.assign({type:e,classes:o,target:i},n)}function _(e){if(this._selection=[],void 0===e&&(e=document.documentElement),e instanceof _)return e;if(e instanceof HTMLCollection||e instanceof NodeList){const i=this._selection=[];x.each(e,function(n,o){i.push(o)})}else if(Array.isArray(e))this._selection=e;else if(e===window||e instanceof HTMLElement||e instanceof Node)this._selection=[e];else if("string"==typeof e)this._selection=document.documentElement.querySelectorAll(e);else if(null!==e){const i="ZxQuery cannot wrap object of this type.";throw h.e(i,typeof e,e),new Error(i)}return this}function I(e){return new _(e)}_.prototype.length=function(){return this._selection.length},_.prototype.parent=function(e){return new _(e?x.getClosest(this._selection[0],e):this._selection[0].parentNode)},_.prototype.children=function(e){return new _(e?this._selection[0].querySelectorAll(e):this._selection[0].children)},_.prototype.reverse=function(){const e=Array.prototype.slice.call(this._selection,0);return this._selection=e.reverse(),this},_.prototype.get=function(e){return e||(e=0),this._selection[e]},_.prototype.eq=function(e){const i=this._selection;let n=i[e];return arguments.length>1&&(n=[],x.each(arguments,function(o,u){null!=i[u]&&n.push(i[u])})),new _(n)},_.prototype.prev=function(){return new _(this._selection[0].previousElementSibling)},_.prototype.next=function(){return new _(this._selection[0].nextElementSibling)},_.prototype.index=function(e){const i=this._selection[0];return 1===this.length()&&null==e?Array.from(this.parent().children()._selection).indexOf(i):this.length()&&null!=e?this._selection.indexOf(e.get()):-1},_.prototype.find=function(e){return this._selection[0]?new _(this._selection[0].querySelectorAll(e)):new _},_.prototype.each=function(e){return x.each(this._selection,e),this},_.prototype.attr=function(e,i){const n=this;if("object"==typeof e)x.each(e,(o,u)=>{n.each((d,m)=>f.dom.setAttribute(m,o,u))});else{if(void 0===i)return f.dom.getAttribute(this._selection[0],e);this.each((o,u)=>f.dom.setAttribute(u,e,i))}return this},_.prototype.trigger=function(e,i){const n=new CustomEvent(e,{detail:i});return this.each(function(o,u){u.dispatchEvent(n)}),this},_.prototype.one=function(e,i){const n=this;return"object"==typeof e&&null==i?(x.each(e,(o,u)=>{n.one(o,u)}),this):(this.on(e,new function(o,u){let d=!1;return function(m,y){d||(d=!0,x(n).off(o,this),u.call(n,m,y,n))}}(e,i)),this)},_.prototype.on=function(e,i){if("object"==typeof e&&null==i){const u=this;return x.each(e,(d,m)=>u.on(d,m)),this}const n=e.split(/[\s|,]+/g)||[];let o;return i&&"function"!=typeof i&&(o=i,i=o.handler),this.each((u,d)=>n.map(m=>function(y,z,E,k){let A=!1;x.each(s,function(){if(this.element===y&&this.path===z&&this.handler===E)return h.w("Handler already registered",y,z,E),A=!0,!1}),A||(s.push({element:y,path:z,handler:E,options:k}),y.addEventListener(z,l,!(!r||null!=k&&!1===k.passive)&&{passive:!0}))}(d,m,i,o))),this},_.prototype.off=function(e,i){if("object"==typeof e&&null==i){const o=this;return x.each(e,(u,d)=>o.off(u,d)),this}const n=e.split(/[\s|,]+/g)||[];return this.each((o,u)=>n.map(d=>b(u,d,i))),this},_.prototype.reset=function(){return this.each((e,i)=>{return n=i,void x.each(s.slice(),function(){this.element===n&&(h.t("Removing event handler",this.element,this.path,this.handler),b(this.element,this.path,this.handler))});var n}),this},_.prototype.isEmpty=function(){return 0===this._selection[0].innerHTML.replace(/\s/g,"").length},_.prototype.position=function(){return x.getPosition(this._selection[0])},_.prototype.css=function(e,i){if("object"==typeof e)x.each(e,(n,o)=>this.each((u,d)=>d.style[n]!==o?d.style[n]=o:null));else{if(f.isNoU(i))return this._selection[0].style[e];this.each((n,o)=>o.style[e]!==i?o.style[e]=i:null)}return this},_.prototype.addClass=function(e){const i=e.split(/[\s|,]+/g)||[];return x.each(this._selection,(n,o)=>i.map(u=>o.classList.add(u))),this},_.prototype.hasClass=function(e){return x.hasClass(this._selection[0],e)},_.prototype.removeClass=function(e){const i=e.split(/[\s|,]+/g)||[];return x.each(this._selection,(n,o)=>i.map(u=>o.classList.remove(u))),this},_.prototype.html=function(e){return f.isNoU(e)?this._selection[0].innerHTML:(this.each((i,n)=>n.innerHTML!==e?n.innerHTML=e:null),this)},_.prototype.checked=function(e){if(f.isNoU(e)){const i=this._selection[0].checked;return null!=i&&"false"!=i&&(i||"checked"==i)}return this.each((i,n)=>n.checked!==e?n.checked=e:null),this},_.prototype.value=function(e){return f.isNoU(e)?this._selection[0].value:(this.each((i,n)=>n.value!==e?n.value=e:null),this)},_.prototype.append=function(e){return"string"==typeof e?this._selection[0].innerHTML+=e:this._selection[0].appendChild(e instanceof _?e.get():e),this},_.prototype.insert=function(e,i){i=i instanceof _?i.get():i;const n=this.children().get(e);return null!==n?this._selection[0].insertBefore(i,n):this._selection[0].appendChild(i),this},_.prototype.prepend=function(e){return"string"==typeof e?this._selection[0].innerHTML=e+this._selection[0].innerHTML:this._selection[0].insertBefore(e instanceof _?e.get():e,this._selection[0].firstElementChild),this},_.prototype.detach=function(){const e=this._selection[0],i=e.parentNode;return null!=i&&(e.__zuix_oldParent=i,e.__zuix_oldIndex=Array.prototype.indexOf.call(i.children,e),i.removeChild(e),h.t("Detached from parent",i,e)),this},_.prototype.attach=function(){const e=this._selection[0];return null!=e.parentNode&&null!=e.__zuix_oldParent&&e.parentNode.removeChild(e),null==e.parentNode&&null!=e.__zuix_oldParent&&(x(e.__zuix_oldParent).insert(e.__zuix_oldIndex,e),e.__zuix_oldParent=null,delete e.__zuix_oldParent,delete e.__zuix_oldIndex),this},_.prototype.display=function(e){return f.isNoU(e)?this._selection[0].style.display:(x.each(this._selection,(i,n)=>n.style.display=e),this)},_.prototype.visibility=function(e){return f.isNoU(e)?this._selection[0].style.visibility:(x.each(this._selection,(i,n)=>n.style.visibility=e),this)},_.prototype.show=function(e){return this.display(e??"")},_.prototype.hide=function(){return this.display("none")},_.prototype.playTransition=function(e){return x.playFx(v("transition",this,e)),this},_.prototype.playAnimation=function(e){return x.playFx(v("animation",this,e)),this},_.prototype.isPlaying=function(){return this.hasClass("--z-playing")};const x=I;I.find=function(e){return x().find(e)},I.each=function(e,i){const n=null==e?0:Object.keys(e).length;if(n>0){let o=0;for(const u in e)if(e.hasOwnProperty(u)){let d=e[u];if(d instanceof Element&&(d=x(d)),!1===i.call(d,u,e[u],d)||(o++,o>=n))break}}return this},I.hasClass=function(e,i){const n=i.split(/[\s|,]+/g)||[];let o=!1;return x.each(n,(u,d)=>{if(o=e.classList.contains(d),o)return!1}),o},I.classExists=function(e){const i=e.split(/[\s|,]+/g)||[];let n=!1;return x.each(i,(o,u)=>{const d=document.styleSheets;if(d)for(let m=0;m<d.length;m++)try{const y=d[m].cssRules;if(null!=y)for(let z=0;z<y.length;z++)if(y[z].selectorText===u){n=!0;break}}catch(y){if("SecurityError"!==y.name&&"InvalidAccessError"!==y.name)throw y}}),n},I.wrapElement=function(e,i){const n=document.createElement(e);return"string"==typeof i?n.innerHTML=i:n.appendChild(i),n},I.wrapCss=function(e,i,n){const o=/(([a-zA-Z0-9\240-\377=:-_- \n,.@]+.*){([^{}]|((.*){([^}]+)[}]))*})/g;let u,d="";i=(i=i.replace(/\/\*[\s\S]*?\*\/|([^:]|^)\/\/.*$/g,"")).replace(/(?:\r\n|\r|\n)/g,"").replace(/}/g,"}\n").replace(/\{/g,"{\n");do{if(u=o.exec(i),u&&u.length>1){let m=u[2];if(null!=m&&m.length>0){m=m.replace(/\n/g,"");const y=m.split(",");let z=!1;if(x.each(y,(E,k)=>{if("."===k.trim()||":host"===k.trim())d+="\n[z-component]"+e+" ";else if("@"===k.trim()[0])d+=k+" ",(k.trim().toLowerCase().startsWith("@media")||k.trim().toLowerCase().startsWith("@supports"))&&(z=!0);else if(n)k.split(/\s+/).forEach(function(A){(A=A.trim()).lastIndexOf(".")>0?A.replace(/(?=\.)(?![^\[\]()]*(?:\[[^\[\]()]*([\])]))?([\])]))/gi,",").split(",").forEach(function(M){d+=""!==M?M+e:"\n"}):d+=""!==A&&">"!==A&&"*"!==A?"\n"+A+e+" ":A+" "});else{let A=k.trim();A=A.startsWith(":host")?A.substring(5):"\n"+A,d+="\n[z-component]"+e+A+" "}E<y.length-1&&(d=d.trim()+", ")}),z){const E=x.wrapCss(e,u[1].substring(u[2].length).replace(/^{([^\0]*?)}$/,"$1"),n);d+="{\n  "+E+"\n}\n"}else d+=u[1].substring(u[2].length)+"\n"}else h.w("z$.wrapCss was unable to parse rule.",m,u)}}while(u);return""!==d&&(i=d),i},I.appendCss=function(e,i,n,o){const u=o||document.head||document.getElementsByTagName("head")[0];let d=null;if(i&&u.contains(i))u.removeChild(i);else{const m=document.getElementById(n);m&&u.contains(m)&&u.removeChild(m)}return"string"==typeof e?(d=document.createElement("style"),d.id=n,d.appendChild(document.createTextNode(e))):e instanceof Element&&(d=e),d&&u.appendChild(d),d},I.replaceBraces=function(e,i){const n=new RegExp(/{?{.*?}?}/g);let o,u="",d=0,m=0;for(;o=n.exec(e);){if("string"==typeof o[0]&&(0===o[0].trim().length||o[0].indexOf("\n")>=0)){const z=e.substring(m,o.index)+o[0];u+=z,m+=z.length;continue}let y=o[0];if(i){const z=i(o[0]);null!=z&&(y=z,d++)}u+=e.substring(m,o.index)+y,m=o.index+o[0].length}return d>0?(u+=e.substring(m),u):null},I.getClosest=function(e,i){for(e=e.parentNode;e&&e!==document;e=e.parentNode)if(e.matches&&e.matches(i))return e;return null},I.getPosition=function(e,i){const n="--ui--visible",o=function(){let m=0,y=0;const z=e.getBoundingClientRect();let E=e;for(;E;){if("body"===E.tagName.toLowerCase()){const k=E.scrollLeft||document.documentElement.scrollLeft,A=E.scrollTop||document.documentElement.scrollTop;m+=E.offsetLeft-k+E.clientLeft,y+=E.offsetTop-A+E.clientTop}else m+=E.offsetLeft-E.scrollLeft+E.clientLeft,y+=E.offsetTop-E.scrollTop+E.clientTop;E=E.offsetParent}return{x:m,y,rect:z}}();o.visible=!1;const u=m=>{if(!(m instanceof Element))return document.body;const y=getComputedStyle(m);return!(m.scrollHeight>=m.clientHeight||m.scrollWidth>=m.clientWidth)||/^(visible|hidden)/.test(y.overflowY||"visible")&&/^(visible|hidden)/.test(y.overflowX||"visible")?u(m.parentElement)||document.body:m},d=u(e.parentNode);if(null!=d){let m=d.getBoundingClientRect();d===document.body&&(m={x:m.x,y:m.y,width:document.documentElement.offsetWidth||document.documentElement.clientWidth,height:document.documentElement.offsetHeight||document.documentElement.clientHeight,top:0,left:0,right:document.documentElement.clientWidth||document.documentElement.offsetWidth,bottom:document.documentElement.clientHeight||document.documentElement.offsetHeight}),null==i&&(i=0);const y=e.getBoundingClientRect();let z="none"!==getComputedStyle(e).display;if(z){z=!(y.left-1>m.right-i||y.right+1<m.left+i||y.top-1>m.bottom-i||y.bottom+1<m.top+i),d!==document.body&&(z=z&&x(d).position().visible);let k=e.parentNode;for(;k&&k instanceof Element&&z;){const A=getComputedStyle(k);z=z&&"none"!==A.display&&"hidden"!==A.visibility,k=k.parentNode}}o.visible=z,o.frame={dx:(y.left+y.width/2-m.left)/m.width,dy:(y.top+y.height/2-m.top)/m.height};const E=x(e);!z&&E.hasClass(n)?(E.removeClass(n),o.event="exit"):z?z&&(E.hasClass(n)?o.event="scroll":(o.event="enter",E.addClass(n))):o.event="off-scroll"}return o},I.addTransition=function(e,i,n,o,u,d){let m="",y=document.getElementById(e);null!=y?m=y.innerHTML:y=document.createElement("style");let z="",E="";x.each(o,(A,M)=>{A=f.camelCaseToHyphens(A),z+="  "+A+": "+M+";\n",E+=A+", "});let k="\n";return x.each(u,(A,M)=>{A=f.camelCaseToHyphens(A),k+="  transition-"+A+": "+M+";\n"}),E=E.substring(0,E.length-2)+";",m+=i+"."+n+", "+i+" ."+n+"{\n"+z+"  transition-property: "+E+k+"}\n",this.appendCss(m,y,e,d)},I.playFx=function(e){const i=this,n=x(e.target);if(0===n.length())return void h.warn("playFx: target element is undefined",e);null==e.classes?e.classes=[]:"string"==typeof e.classes&&(e.classes=e.classes.split(/[\s|,]+/g));const o=e.classes.length>1&&e.classes.shift();n.hasClass("--z-playing")||(n.addClass("--z-playing"),o&&n.addClass(o).css(e.type,"none"));const u=getComputedStyle(n.get()),d=1e3*parseFloat(u[e.type+"-delay"])||o?10:0;let m=!1;const y=()=>{m||(m=!0,e.classes.length>1?(e.onStep&&e.onStep.call(n,n,e.classes.slice(1)),i.playFx(e)):(!e.holdState&&e.classes.length>0&&n.removeClass(e.classes.shift()),n.removeClass("--z-playing"),e.onEnd&&e.onEnd.call(n,n)))},z=()=>{o&&n.css(e.type,"").removeClass(o);const E=e.classes[0];E&&n.addClass(E),e.options&&x.each(e.options,function(M,j){n.css(e.type+"-"+M,j)});const k=1+(parseFloat(u[e.type+"-iteration-count"])||0),A=1e3*parseFloat(u[e.type+"-duration"])*k;setTimeout(y,A)};n.on(e.type+"end",function(E){E.target===e.target.get()&&(n.off(e.type+"end",this),y())}),d>0?setTimeout(z,d):z()},I.ZxQuery=_,String.prototype.hashCode=function(){let e=0;if(0===this.length)return e;for(let i=0;i<this.length;i++)e=(e<<5)-e+this.charCodeAt(i),e|=0;return e},H.exports=I},693:function(H,S,p){"use strict";H.exports=p(459)()},265:function(H,S,p){"use strict";const h=p(349);function f(){this.observableList=[]}function r(b){let v="";for(;b&&b.__path__;){const _=b;v=(b=b.__parents__[0])&&b.__path__?"['"+_.__path__+"']."+v:_.__path__+(v.startsWith("[")?"":".")+v}return v}function s(b){const v=[];return b.__parents__.forEach(_=>v.push(...s(_))),v.push(...b.__listeners__),v}function l(b){s(b).forEach(v=>b.unsubscribe(v))}f.prototype.observable=function(b){let v;const _=this.observableList.filter(I=>b===I.proxy||b===I.target);return 1===_.length&&(v=_[0]),null==v&&(v=new h(this,b,{context:null,get:function(I,x){if("toJSON"===x)return()=>I;if("observableTarget"===x)return I;if("Symbol(Symbol.toStringTag)"===x.toString())return;let e;try{e=I[x]}catch{}if(void 0===e)return;const i=[],n=this.context.observable(I);if("object"==typeof e){const u=this.context.observable(e);-1===u.__parents__.indexOf(n)&&(u.__parents__.push(n),u.__path__=x),i.push(...s(u)),e=u.proxy}else i.push(...s(n));const o=r(n)+x;return i.forEach(u=>{u.get&&u.get(I,x,e,o)}),e},set:function(I,x,e){const i=JSON.parse(JSON.stringify(I)),n=I[x];"object"==typeof n&&l(this.context.observable(n)),I[x]=e;const o=this.context.observable(I),u=r(o)+x;return s(o).forEach(d=>{d.set&&d.set(I,x,e,u,i),i[u]!==e&&d.change&&d.change(I,x,e,u,i)}),!0},deleteProperty:function(I,x){const e=I[x];return"object"==typeof e&&l(this.context.observable(e)),delete I[x]}})),v},H.exports=f},349:function(H){"use strict";function S(p,h,f){Object.assign(f,{context:p}),Object.assign(this,Proxy.revocable(h,f)),this.handler=f,this.handler.context.observableList=this.handler.context.observableList||[],this.handler.context.observableList.push(this),this.target=h,this.__parents__=[],this.__listeners__=[]}S.prototype.subscribe=function(p){return this.handler.context.observableList.forEach(h=>{if(h!==this&&-1!==h.__listeners__.indexOf(p))throw new Error("Listener already registered.")}),this.__listeners__.push(p),this},S.prototype.unsubscribe=function(p){const h=this.__listeners__.indexOf(p);return-1!==h&&this.__listeners__.splice(h,1),0===this.__listeners__.length&&(this.revoke(),this.handler.context.observableList=this.handler.context.observableList.filter(f=>{if(f===this)return!1;const r=f.__parents__.indexOf(this);return-1===r||(f.__parents__.splice(r,1),0!==f.__parents__.length||0!==f.__listeners__.length)||(f.unsubscribe(null),!1)})),this},H.exports=S},398:function(H){"use strict";function S(p,h,f,r){this.$view=p,this.$element=h,this.contextData=f,this.refreshMs=100,this.paused=!1,this.forceActive=!1;let s=!1;this.requestRefresh=(l,b,v)=>{const _=l.get()===b.get()&&null!=zuix.context(l)&&!s||b.position().visible,I=this.forceActive||!this.paused&&null!=b.parent()&&_,x=(e,i,n)=>{null!=e&&(this.contextData=e),null==i&&(i=b.attr("@delay")?+b.attr("@delay"):null),null!=i&&(this.refreshMs=i),null==n&&(n=null!=b.attr("@active")),null!=n&&(this.forceActive=n);const o=zuix.context(l);null!=o&&null==o._error&&this.refreshMs>0?(setTimeout(()=>this.requestRefresh(l,b,this.contextData),I?this.refreshMs:500),s=!0):null!=o&&null==o._error||this.stop()};I?(b._refreshActive||(b._refreshActive=!0,b.trigger("refresh:active")),r(l,b,v,(e,i,n)=>x(e,i,n))):(b._refreshActive&&(b._refreshActive=!1,b.trigger("refresh:inactive")),x(this.contextData))}}S.prototype.stop=function(){this.pause(),this.refreshMs=0,this.stopped=!0},S.prototype.start=function(p){if(this.refreshMs=p||this.refreshMs,this.started)return this.resume();this.started=!0,this.requestRefresh(this.$view,this.$element,this.contextData)},S.prototype.pause=function(){this.paused=!0},S.prototype.resume=function(){this.paused=!1},H.exports=S},854:function(H){H.exports=()=>{}},622:function(H,S,p){"use strict";const h=p(381),f=h("ComponentContext.js"),r=p(541),s=p(917),l=p(826),b=p(643);let v=null;const _=[],I=[],x=(n,o)=>{const u=l.isNoU((o=o.observableTarget||o).value)?l.isNoU(o.innerHTML)?o:o.innerHTML:o.value;switch(n.tagName.toLowerCase()){case"img":n.src=l.isNoU(o.src)?l.isNoU(o.innerHTML)?o:o.innerHTML:o.src;break;case"a":n.href=l.isNoU(o.href)?l.isNoU(o.innerHTML)?o:o.innerHTML:o.getAttribute("href"),l.isNoU(o.href)||l.isNoU(o.innerHTML)||""===o.innerHTML.trim()||0===s(o).find(l.dom.queryAttribute(r.zField)).length()&&s(n).html("").append(document.createTextNode(o.innerHTML));break;case"input":switch(n.type){case"checkbox":case"radio":n.value==u&&(n.checked=!0);break;default:n.value=u}break;case"select":s.each(n.options,(m,y)=>{if(y.value==u)return n.selectedIndex=m,!1});break;default:const d=l.isNoU(o.innerHTML)?document.createTextNode(o):o.innerHTML;s(n).html("").append(d)}},e=(n,o,u,d,m)=>{d&&!n._disposed&&d.call(o,u,m,o,function(y){if(!n._disposed){const z=u.get().__zuix_refreshTimeout;z&&I[z]&&clearTimeout(I[z]),u.get().__zuix_refreshTimeout=setTimeout(function(){e(n,o,u,d,m)},y||500)}})};function i(n,o,u){return v=n,this.contextId=null==o||null==o.contextId?null:o.contextId,this.componentId=null,Object.defineProperty(this,"handlers",{enumerable:!1,writable:!0,value:{refresh:function(d,m,y,z){}}}),Object.defineProperty(this,"trigger",{enumerable:!1,writable:!0,value:(d,m,y)=>{u&&u(d,m,y)}}),Object.defineProperty(this,"_options",{enumerable:!1,writable:!0,value:null}),Object.defineProperty(this,"_container",{enumerable:!1,writable:!0,value:null}),Object.defineProperty(this,"_model",{enumerable:!1,writable:!0,value:null}),Object.defineProperty(this,"_view",{enumerable:!1,writable:!0,value:null}),Object.defineProperty(this,"_css",{enumerable:!1,writable:!0,value:null}),Object.defineProperty(this,"_style",{enumerable:!1,writable:!0,value:null}),Object.defineProperty(this,"_controller",{enumerable:!1,writable:!0,value:null}),Object.defineProperty(this,"behavior",{enumerable:!1,writable:!0,value:null}),Object.defineProperty(this,"_eventMap",{enumerable:!1,writable:!0,value:[]}),Object.defineProperty(this,"_behaviorMap",{enumerable:!1,writable:!0,value:[]}),Object.defineProperty(this,"_fieldCache",{enumerable:!1,writable:!0,value:[]}),Object.defineProperty(this,"_c",{enumerable:!1,writable:!0,value:null}),Object.defineProperty(this,"_modelListener",{enumerable:!1,writable:!0}),this._modelListener=Object.assign({context:null,get:function(d,m,y,z){},set:function(d,m,y,z,E){const k=this.context.$;if(d instanceof Element&&(z=z.split(".")[0],y=d),"function"==typeof y){let M=k.find(l.dom.queryAttribute(r.zBind,z));return null==M.get()&&(M=k.find(l.dom.queryAttribute(r.zField,z))),void e(this.context,k,M,y,m)}const A=M=>{null!=M.get()&&M.each((j,L)=>x(L,y))};if(k.get()){A(k.find(l.dom.queryAttribute(r.zBind,z))),A(k.find(l.dom.queryAttribute(r.zField,z)));const M=this.context._c;M&&M.update&&l.catchContextError(this.context,()=>{M.update(d,m,y,z,E)})}}},{context:this}),Object.defineProperty(this,"_viewObserver",{enumerable:!1,writable:!0,value:new b(this)}),Object.defineProperty(this,"_disposed",{enumerable:!1,writable:!0,value:!1}),Object.defineProperty(this,"#",{enumerable:!1,writable:!0,value:{}}),Object.defineProperty(this,"_",{enumerable:!1,writable:!0,value:{}}),Object.defineProperty(this,"_refreshHandler",{enumerable:!1,writable:!0}),Object.defineProperty(this,"_dependencyResolver",{enumerable:!1,writable:!0}),this.options(o),this}i.prototype.dispose=function(){if(this._disposed)return;this._disposed=!0,this._viewObserver.stop(),l.dom.getShadowRoot(this._container||this._view)&&this.style(null),this.model(null),this._c&&(this._c.view()&&(this._c.trigger("component:dispose",this._c.view(),!0),this._c.view().attr(r.zComponent,null).attr(r.zContext,null).attr(r.zLoad,null).attr(r.zLoaded,null).attr(r.zReady,null).attr(r.resourceType.view,null).attr(r.resourceType.controller,null).attr(r.resourceType.file,null).attr(this.getCssId(),null),this._c.view().reset(),this._c._fieldCache&&s.each(this._c._fieldCache,function(u,d){d.reset()})),this._c.dispose&&l.catchContextError(this,()=>{this._c.dispose.call(this,this)})),this._c&&this._c._childNodes.length>0&&(this._c.view().html(""),this._c.restoreView());const n=v.dumpContexts(),o=n.indexOf(this);-1!==o&&n.splice(o,1)},i.prototype.container=function(n){return null==n?this._container:(n instanceof s.ZxQuery&&(n=n.get()),this._container=n,this)},i.prototype.view=function(n){if(void 0===n)return this._view;if(null===n)throw new Error("View cannot be set to null.");if(n instanceof s.ZxQuery&&(n=n.get()),n===this._view)return this;this._viewObserver.stop();const o=this.getCssId();if(null!=this._view){const m="*"+l.dom.cssNot(r.zLoad).getAll();s(this._view).attr(o,null).find(m).each(function(y,z){this.attr(o,null)})}const u=m=>{m.find("*").each((y,z,E)=>{for(let k=0;k<z.attributes.length;k++){const A=z.attributes.item(k),M=A.value;if(A.name.length>1&&A.name.startsWith("#")){const j=l.hyphensToCamelCase(A.name.substring(1));null==E.attr(r.zField)&&E.attr(r.zField,j),null==E.attr(r.zBind)&&null!=M&&M.length>0&&E.attr(r.zBind,M)}}})};if(f.t(this.componentId,"view:attach","timer:view:start"),"string"==typeof n){const m={content:n};this.trigger(this,"html:parse",m);const y=s.wrapElement("div",n=m.content);null!=y.firstElementChild&&(null!=l.dom.getAttribute(y.firstElementChild,r.zView)?1===y.children.length&&(n=y.firstElementChild.innerHTML):n=y.innerHTML),null!=this._container?(this._view=this._container,this._view.innerHTML+=n):null!=this._view?this._view.innerHTML=n:this._view=y;const z=s(this._view);z.find("script:not([type=jscript])").each((E,k,A)=>{"true"!==A.attr(r.zuixLoaded)&&(A.attr(r.zuixLoaded,"true"),l.catchContextError(this,()=>{Function(k.innerHTML).call(window)},M=>console.error(M)))}),u(z),this.trigger(this,"view:process",z)}else null!=this._container&&"default"!==this.componentId?(this._view=s.wrapElement("div",n.outerHTML).firstElementChild,l.dom.setAttribute(this._view,r.zView,null),this._container.appendChild(this._view),this._view=this._container):this._view=n;const d=s(this._view);return u(d),d.find(l.dom.queryAttribute(r.zLoad,null,l.dom.cssNot(r.zLoaded))).each((m,y,z)=>z.attr(r.zLoaded,"false")),this.checkEncapsulation(),this.modelToView(),f.t(this.componentId,"view:attach","timer:view:stop"),this},i.prototype.field=function(n){const o=v.field(n,this._view,this);return o.on=(u,d,m,y)=>{if("string"==typeof d){const z=d;d=()=>{this._c&&this._c.trigger(z,m,y)}}return s.ZxQuery.prototype.on.call(o,u,d)},o},i.prototype.checkEncapsulation=function(){const n=s(this._view),o=this.getCssId();if(n.length()&&!1!==this._options.css)if(n.attr(o,""),null!=this._container||null!=this._style){const u="*"+l.dom.cssNot(r.zLoad).getAll();n.find(u).each((d,m,y)=>y.attr(o,"")),this._viewObserver.start(),n.attr(r.resourceType.controller,null)}else n.attr(r.resourceType.controller,"")},i.prototype.style=function(n){if(void 0===n)return this._style;const o=this.getCssId();f.t(this.componentId,"view:style","timer:view:start",o);const u=l.dom.getShadowRoot(this._container||this._view);if(null==n||n instanceof Element)this._css=n instanceof Element?n.innerText:n,this._style=s.appendCss(n,this._style,this.componentId+"@"+o,u);else if("string"==typeof n){this._css=n;const d={content:n};this.trigger(this,"css:parse",d),n=d.content;let m="";!0===this.options().resetCss&&(m=":host { all: initial; }"),u&&"default"!==this.componentId||(n=s.wrapCss("["+o+"]",m+"\n"+n,!0===this.options().encapsulation)),this._style=s.appendCss(n,this._style,this.componentId+"@"+o,u)}return u||this.checkEncapsulation(),f.t(this.componentId,"view:style","timer:view:stop",o),this},i.prototype.model=function(n){return void 0===n||this._model===n||(null!==this._model&&"function"!=typeof this._model&&v.observable(this._model).unsubscribe(this._modelListener),this._model=n,null!=n&&("function"!=typeof n&&(this._model=v.observable(n).subscribe(this._modelListener).proxy),this.modelToView(),null!=this._c&&this._c.update&&l.catchContextError(this,()=>{this._c.update.call(this._c,null,null,null,null,this._c)}))),this._model},i.prototype.controller=function(n){return void 0===n?this._controller:(this._controller="string"==typeof n?v.controller(n,{componentId:this.componentId}):n,this._controller.log=h(this.componentId),this)},i.prototype.options=function(n){if(null==n)return this._options;const o=this._options=this._options||{};return Object.assign(o,n),this.componentId=o.componentId||this.componentId,null==_[this.componentId]&&(_[this.componentId]=_.length,_.length++),this.container(o.container),this.view(o.view),"string"==typeof o.css&&this.style(o.css),this.controller(o.controller),this.model(o.model),this},i.prototype.on=function(n,o){return this._c.on(n,o),this},i.prototype.loadCss=function(n){const o=this;n||(n={});let u=o.componentId;n.path&&(u=n.path);let d=v.store("zuix.inlineStyles");if(null==d&&(d=[],v.store("zuix.inlineStyles",d)),null!=d[u])o.style(d[u]),n.success&&n.success.call(o,d[u],o),n.then&&n.then.call(o,o);else{const m=s().find('style[media="#'+u+'"],style[media="'+u+'"]');if(m.length()){const y=m.get(0).innerText;o.style(y),m.detach(),d[u]=y,n.success&&n.success.call(o,y,o),n.then&&n.then.call(o,o)}else{u==o.componentId&&(u+=".css");const y=v.store("settings")?v.store("settings").fetchOptions:void 0;fetch(v.getResourcePath(u),y).then(z=>z.text()).then(z=>{o.style(z),n.success&&n.success.call(o,z,o)}).catch(z=>{f.e(z,o),n.error&&n.error.call(o,z,o)}).finally(()=>{n.then&&n.then.call(o,o)})}}return this},i.prototype.loadHtml=function(n){const o=this;let u=o.componentId;n||(n={}),n.path&&(u=n.path);let d=v.store("zuix.inlineViews");if(null==d&&(d=[],v.store("zuix.inlineViews",d)),null!=d[u])o.view(d[u]),n.success&&n.success.call(o,d[u],o),n.then&&n.then.call(o,o);else{const m=s().find(l.dom.queryAttribute(r.zView,u,l.dom.cssNot(r.zComponent)));if(m.length()){let y,z=m.get(0);if("template"===z.tagName.toLowerCase()?(z=z.cloneNode(!0),y=z.content.querySelectorAll("style")):y=z.querySelectorAll('style[media="#"]'),y)for(const E of y)E.setAttribute("media","#"+o.componentId);d[u]=z.innerHTML,o.view()===z||null!=o.container()&&o.container().contains(z)?(m.attr(r.zView,null),o._view=z,this.trigger(this,"view:process",s(o.view()))):o.view(z.innerHTML),n.success&&n.success.call(o,z.innerHTML,o),n.then&&n.then.call(o,o)}else{u==o.componentId&&(u+=n.cext?n.cext:".html");const z=v.store("settings")?v.store("settings").fetchOptions:void 0;fetch(v.getResourcePath(u),z).then(E=>E.text()).then(E=>{o.view(E),n.success&&n.success.call(o,E,o)}).catch(E=>{f.e(E,o),n.error&&n.error.call(o,E,o)}).finally(()=>{n.then&&n.then.call(o,o)})}}return this},i.prototype.viewToModel=function(){f.t(this.componentId,"view:model","timer:vm:start");const n={},o=s(this._view);return o.find(l.dom.queryAttribute(r.zField)).each((u,d,m)=>{if(!v.isDirectComponentElement(o,m))return!0;const y=m.attr(r.zField);n[y]=d}),this._model=v.observable(n).subscribe(this._modelListener).proxy,f.t(this.componentId,"view:model","timer:vm:stop"),this},i.prototype.modelToView=function(){if(f.t(this.componentId,"model:view","timer:mv:start"),null!=this._view){this["#"]={};const n=s(this._view);n.find(l.dom.queryAttribute(r.zField)).each((o,u,d)=>{if(!v.isDirectComponentElement(n,d)&&"true"!==d.attr("inherits"))return!0;let m=d.attr(r.zBind);if(null==m&&(m=d.attr(r.zField)),"function"==typeof this._model)e(this,n,d,this._model,m);else{let y=l.propertyFromPath(this._model,m);const z=l.hyphensToCamelCase(m),E=l.propertyFromPath(this._model,z);null==y&&null!=E&&(m=z,y=l.propertyFromPath(this._model,y)),"function"==typeof y?e(this,n,d,y,m):null!=y&&x(u,y)}}),n.find(l.dom.queryAttribute(r.zField)).each((o,u,d)=>{if(!v.isDirectComponentElement(n,d)&&"true"!==d.attr("inherits"))return!0;let m=d.attr(r.zBind);null==m&&(m=d.attr(r.zField));try{const y=l.hyphensToCamelCase(m);Function("function testName(){ const "+y+' = "test"; }'),this["#"][y]=this.field(m)}catch{}})}return f.t(this.componentId,"model:view","timer:mv:stop"),this},i.prototype.getCssId=function(){let n="";return("default"===this.componentId||"string"==typeof this._options.css&&!1===l.dom.getShadowRoot(this._container||this._view))&&(n="_"+this.contextId),r.cssIdPrefix+_[this.componentId]+n},Object.defineProperty(i.prototype,"path",{get:function(){const n=this.componentId,o=n.lastIndexOf("/");return o<0?n:n.substring(0,o+1)}}),Object.defineProperty(i.prototype,"name",{get:function(){const n=this.componentId,o=n.lastIndexOf("/");return o<0?n:n.substring(o+1)}}),Object.defineProperty(i.prototype,"$",{get:function(){return this._c&&this._c.view()}}),H.exports=i},211:function(H,S,p){"use strict";const h=p(541);u.prototype.componentize=function(j){return o?(s().one("componentize:step",()=>requestAnimationFrame(()=>{o=!1,n.componentize(j)})),this):(o=!0,n.trigger(this,"componentize:begin"),n.$().trigger("componentize:begin"),n.resolveImplicitLoad(j),null==(L=j)&&(L=document),l.indexOf(L)||l.push(L),m(j),this);var L},u.prototype.applyOptions=function(j,L){return k(j,L),this},u.prototype.loadInline=function(j,L){return y(j,L),this},u.prototype.resolvePath=function(j){return z(j)},u.prototype.willLoadMore=function(){return b.length>0||l.length>0},u.prototype.lazyLoad=function(j,L){return d(j,L)},u.prototype.dequeue=function(j){for(let L=0;L<b.length;L++)if(b[L].element===j){b.splice(L,1);break}return this},u.prototype.setHost=function(j){return n=j,this},H.exports=function(){return new u};const f=p(381)("ComponentContext.js"),r=p(826),s=p(917),l=[],b=[],v={},_=[],I=[],x=function(){return{element:null,priority:0,visible:!0,lazy:!1}};let e=!1,i=1,n=null,o=!1;function u(){}function d(j,L){return null!=j&&(e=!j),null!=L&&(i=L),!e}function m(j){!function(P){null==P&&l.length>0&&(P=l.unshift()),P instanceof s.ZxQuery&&(P=P.get());const T=r.dom.queryAttribute(h.zLoad,null,r.dom.cssNot(h.zLoaded));let W=s(P).find(T);W=Array.prototype.slice.call(W._selection);const $=[];for(let Q=0;Q<W.length;Q++){const F=W[Q];let U=+r.dom.getAttribute(F,h.zPriority);isNaN(U)&&(U=0);let le=0,ee=F.parentNode,V=!1;for(;null!=ee&&ee!==document&&!(ee instanceof ShadowRoot);){if(le++,null!=r.dom.getAttribute(ee,h.zView)){V=!0;break}ee=ee.parentNode}if(!V){const ce=new x;ce.element=F,ce.priority=U+1e3*le,$.push(ce)}}let ie=0;for(let Q=0;Q<$.length;Q++){let F=!1;for(let U=0;U<b.length;U++)if($[Q].element===b[U].element){F=!0;break}if(!F){const U=$[Q].element;k(U,r.dom.getAttribute(U,h.zOptions)),b.push($[Q]),ie++}}v.queued===b.length&&v.added===ie||(f.t("componentize:count",b.length,ie),v.queued=b.length,v.added=ie),0===ie||0===l.length&&0===b.length?(n.trigger(this,"componentize:end"),n.$().trigger("componentize:end")):n.$().trigger("componentize:step"),o=!1}(j);const L=function(){b.sort(function(W,$){return W.priority-$.priority});let P=null,T=b.length>0?b.shift():null;for(;null!=T&&null!=T.element;){const W=T.element,$=M(W);if(d()&&$?(T.lazy=!0,T.visible=s.getPosition(W,i).visible):(T.lazy=!1,T.visible=!0),null!=W&&T.visible){P={item:T,cancelable:T.lazy};break}if(!(b.length>0))break;T=b.shift()}return P}();null!=L&&null!=L.item&&null!=L.item.element&&y(L.item.element)}function y(j,L){const P=s(j);if(!0===P.attr(h.zLoaded)||!1===P.attr(h.zLoaded)||P.parent("pre,code").length())return!1;P.attr(h.zLoaded,"true");let T=P.attr(h.zOptions);T?(T=E(j,T),T=r.cloneObject(T)||{}):T=null!=P.get().__zuix_loadOptions?P.get().__zuix_loadOptions:{},L&&Object.assign(T,L);const W=P.attr(h.zContext);if(W){const V=n.context(W);null!==V&&(T=V.options()),T.contextId=W}T.view||P.isEmpty()?T.view||T.container||!P.isEmpty()||null!=P.attr(h.resourceType.controller)||(T.container=j):(T.view=j,T.viewDeferred=!0);let $=P.attr(h.zLoad);if(!$)return!1;if($=z($),P.attr(h.zLoad,$),"default"!==$&&null!==P.attr(h.resourceType.view))P.attr(h.zComponent,null),T.controller||(T.controller=function(){});else if("default"===$||null!==P.attr(h.resourceType.controller)){T.view=T.view||j,T.viewDeferred=!0,T.html=T.html||!1,T.css=T.css||!1;const V=P.children('[media="#"]');V.length()&&V.parent().get()===P.get()&&(!1===T.css&&(T.css=""),V.each((ce,oe,ue)=>T.css+="\n"+T.css+ue.html()),V.detach()),"default"===$&&(T.controller=T.controller||function(){})}Array.from(P.get().attributes).filter(V=>V.nodeName.startsWith(":")).forEach(V=>{const ce=V.nodeName.match(/[^:]+/g);let oe=T;ce&&ce.forEach((ue,t)=>{if(ue=r.hyphensToCamelCase(ue),t===ce.length-1){let a,c=null;c=P.parent().get()instanceof ShadowRoot?T.__shadowRoot.parent(`[${h.zReady}="true"]`):P.parent(`[${h.zReady}="true"]`),c=n.context(c);try{if(c){let w=V.nodeValue;if(!w)return;const C=V.nodeName,N=C.lastIndexOf(":")<2;w.match(/^[^<>()\[\]\-+\s!?/&\xa3"=^#@:;,.*|]+$/g)||(w=`(event, args) => { ${V.nodeValue} }`),(C.startsWith(":model")||N)&&(w=`(${V.nodeValue})`);try{a=n.runScriptlet(w,P,c.$,null)}catch(O){f.warn(C,V.nodeValue,O)}if(null==a)return;if(":ready"===C)return void(oe.ready=a);if(":error"===C)return void(oe.error=a);if(C.startsWith(":on")||C.startsWith(":behavior")){if(N)return void(oe.on=a);const O=C.substring(C.indexOf(":",1)+1);((C.startsWith(":behavior")?oe.behavior:oe.on)||{})[O]=a}else if(C.startsWith(":model")){if(N)return void(oe.model=a);const O=C.match(/[^:]+/g).splice(1);let g=oe.model||{};O.forEach((R,ye)=>{if(R=r.hyphensToCamelCase(R),ye===O.length-1)return g[R]=a;g=g[R]=g[R]||{}})}}else a=Function("return "+V.nodeValue+";")()}catch(w){f.warn(ce.join(":"),ue,V.nodeValue,w)}return oe[ue]=a}oe=oe[ue]=oe[ue]||{}})});const ie=P.attr(h.zOn);ie&&(T.on=E(j,ie));const Q=P.attr(h.zCss);Q&&(T.css=E(j,Q));const F=P.attr(h.zBehavior);F&&(T.behavior=E(j,F));const U=P.attr(h.zModel);U&&(T.model=E(j,U));const le=P.attr(h.zUsing);le&&(T.using=le);const ee=P.attr(h.zPriority);return ee&&(T.priority=+ee),n.load($,T),!0}function z(j){if("@"===j[0]){let L=n.store("config"),P="https://zuixjs.github.io/zkit/lib/1.2/";if(null!=L&&null!=L[location.host]&&(L=L[location.host]),null!=L)switch(typeof L.libraryPath){case"object":s.each(L.libraryPath,(T,W)=>!j.startsWith(T+"/")||(P=W,!1));break;case"string":P=L.libraryPath}j=P+j.substring(j.indexOf("/")+1)}return j}function E(j,L){if("string"==typeof L){const P=s(j).parent(r.dom.queryAttribute(h.zLoad));if(P.get()){const T=n.context(P);try{return T._refreshHandler.runScriptlet(j,`[${L}][0]`)}catch{}}L=L.trim().startsWith("{")&&L.trim().endsWith("}")?Function("return "+L)():r.propertyFromPath(window,L)}return L}function k(j,L){L=E(j,L),j&&L&&(L.componentId&&r.dom.setAttribute(j,h.zLoad,L.componentId.toString().toLowerCase()),L.contextId&&r.dom.setAttribute(j,h.zContext,L.contextId.toString().toLowerCase()),L.lazyLoad&&r.dom.setAttribute(j,h.zLazy,L.lazyLoad.toString().toLowerCase()))}function A(j){const L={element:j};return _.push(L),L}function M(j){const L=s(j),P=L.parent(`[${h.zLazy}]`);if("false"===L.attr(h.zLazy)||P.length()&&"false"===P.attr(h.zLazy))return!1;if(function(T){for(let W=0;W<_.length;W++){const $=_[W];if($.element===T)return $}return null}(j))return!0;{const T=r.dom.queryAttribute(h.zLazy,"scroll")+","+r.dom.queryAttribute(h.zLazy,"true"),W=L.parent(),$=W.length()?W.parent(T).get():null;if($){A(j);let ie=function(Q){for(let F=0;F<I.length;F++){const U=I[F];if(U.element===Q)return U}return null}($);return ie||(ie=function(Q){const F={element:Q};return I.push(F),F}($),"scroll"===r.dom.getAttribute($,h.zLazy)&&function(Q,F){let U,le=(new Date).getTime();s(F===document.body?window:F).on("scroll",()=>{const ee=(new Date).getTime();ee-le>150?(le=ee,m(F)):(clearTimeout(U),U=setTimeout(()=>m(F),100))})}(0,$)),!0}if("true"===L.attr(h.zLazy))return A(j),!0}return!1}},561:function(H,S,p){"use strict";const h=p(917),f=p(826);function r(s){const l=this;Object.defineProperty(l,"context",{enumerable:!0,writable:!0,value:s}),Object.defineProperty(l,"_view",{enumerable:!1,writable:!0,value:null}),Object.defineProperty(l,"_childNodes",{enumerable:!1,writable:!0,value:[]}),Object.defineProperty(l,"saveView",{enumerable:!1,writable:!0,value:()=>{l.restoreView(),l.view().children().each((I,x)=>l._childNodes.push(x))}}),Object.defineProperty(l,"restoreView",{enumerable:!1,writable:!0,value:()=>{if(l._childNodes.length>0){let I=l.view();I.get().parentNode instanceof ShadowRoot&&(I=l.options().__shadowRoot),I&&(I.html(""),h.each(l._childNodes,(x,e)=>I.append(e))),l._childNodes.length=0}}}),Object.defineProperty(l,"on",{enumerable:!1,writable:!0}),l.on=(I,x)=>"object"==typeof I&&null==x?(h.each(I,(e,i)=>l.on(e,i)),l):(l.addEvent(I,x),l),Object.defineProperty(l,"mapEvent",{enumerable:!1,writable:!0}),l.mapEvent=(I,x,e,i)=>{null!=x&&(x.off(e,l.eventRouter),I.push({target:x,eventPath:e,handler:i}),x.on(e,l.eventRouter))},Object.defineProperty(l,"eventRouter",{enumerable:!1,writable:!0}),l.eventRouter=I=>{const x=l.view();s._behaviorMap.concat(s._eventMap).forEach(e=>{e.eventPath===I.type&&e.handler&&e.handler.call(x,I,I.detail,x)})};const b=s.options();let v=null;if(null!=b.on&&h.each(b.on,(I,x)=>I.split(/[\s|,]+/g).map(e=>l.addEvent(e,x))),null!=b.behavior)for(const I in b.behavior)b.behavior.hasOwnProperty(I)&&(v=b.behavior[I],I.split(/[\s|,]+/g).map(x=>l.addEvent(x,v)));try{if("function"==typeof(_=s.controller())&&/^\s*class\s+/.test(_.toString())){const I=new(s.controller().bind(l,l));s.controller(I)}else s.controller().call(l,l)}catch(I){console.log(I)}var _;return Object.assign(s.controller(),b.controllerMembers),l}r.prototype.using=function(s,l,b){return zuix.using(s,l,b,this.context),this},r.prototype.addEvent=function(s,l){return this.mapEvent(this.context._eventMap,this.view(),s,l),this},r.prototype.addBehavior=function(s,l){return this.mapEvent(this.context._behaviorMap,this.view(),s,l),this},r.prototype.addTransition=function(s,l,b){const v=this.context.getCssId();return this.context.$.attr(v,""),h.addTransition(this.context.componentId+"@"+v,"[z-component]["+v+"]",s,l,b,f.dom.getShadowRoot(this.context.container()||this.context.view())),this},r.prototype.field=function(s){return this.context.field(s)},r.prototype.clearCache=function(){this.context._fieldCache={}},r.prototype.view=function(s){const l=this;if((l.context.view()||l._view!==l.context.view())&&(l.clearCache(),l._view=h(l.context.view()),l._view.field=b=>l.context.field(b)),s)return l._view.find(s);if(l._view)return l._view;throw new Error("Not attached to a view yet.")},r.prototype.model=function(s){return s?(this.context.model(s),this):this.context.model()},r.prototype.options=function(){return this.context.options()},r.prototype.trigger=function(s,l,b){if(b){let v=this.context.container();v||(v=this.context.view()),v&&h(v).trigger(s,l),this.context.trigger(this.context,s,l)}else{const v=this.options().__shadowRoot;v&&v.trigger(s,l),this.view().trigger(s,l)}return this},r.prototype.expose=function(s,l){const b=(v,_)=>{_&&(_.get||_.set)?Object.defineProperty(this.context,v,_):void 0===_?delete this.context[v]:this.context[v]=_};return"object"==typeof s?h.each(s,(v,_)=>b(v,_)):b(s,l),this},r.prototype.declare=function(s,l){const b=(v,_)=>{_&&(_.get||_.set)?Object.defineProperty(this.context._,v,_):void 0===_?delete this.context._[v]:this.context._[v]=_};return"object"==typeof s?h.each(s,(v,_)=>b(v,_)):b(s,l),this},r.prototype.loadCss=function(s){return this.context.loadCss(s),this},r.prototype.loadHtml=function(s){return this.saveView(),this.context.loadHtml(s),this},r.prototype.log={},r.prototype.for=function(s){return this},H.exports=r},871:function(H){"use strict";function S(p){p.init=this.onInit.bind(this),p.create=this.onCreate.bind(this),p.dispose=this.onDispose.bind(this),p.update=(h,f,r,s,l)=>this.onUpdate.call(this,h,f,r,s,l),Object.assign(this,p),Object.assign(this,Object.getPrototypeOf(p))}S.prototype.onInit=function(){},S.prototype.onCreate=function(){},S.prototype.onDispose=function(){},S.prototype.onUpdate=function(p,h,f,r,s){},H.exports=S},541:function(H){const S=Object.freeze({zModel:"z-model",zBind:"z-bind",zBehavior:"z-behavior",zOn:"z-on",zCss:"z-css",zComponent:"z-component",zContext:"z-context",zField:"z-field",zLazy:"z-lazy",zLoad:"z-load",zLoaded:"z-loaded",zOptions:"z-options",zUsing:"z-using",zPriority:"z-priority",zView:"z-view",zuixLoaded:"zuix-loaded",zReady:"z-ready",resourceType:{view:"view",controller:"ctrl",file:"file"},cssIdPrefix:"z-css-"});H.exports=S},643:function(H,S,p){"use strict";const h=p(541),f=p(826);function r(s){const l=this._context=s;this._mutationObserver=null,this._mutationCallback=(b,v)=>{const _=f.dom.queryAttribute(h.zComponent),I=x=>{for(let e=0;e<x.attributes.length;e++)if(x.attributes[e].name.startsWith(h.cssIdPrefix))return!0};for(const x of b)"childList"===x.type&&x.addedNodes.forEach(e=>{if(e instanceof Element){let i=zuix.$(e).parent(_);if(null==i.get())return;if(!1!==l.options().css&&null==i.attr(h.resourceType.controller))i.get()!==l._container&&i.get()!==l._view||I(e)||f.dom.setAttribute(e,l.getCssId(),"");else{let n=0;do{n++,i=i.parent(_)}while(n<10&&null!=i.get()&&null!=i.attr(h.resourceType.controller));i.get()&&(i=zuix.context(i),I(e)||(f.dom.setAttribute(e,i.getCssId(),""),zuix.$(e).find("*").each(function(){this.attr(i.getCssId(),"")})))}}})}}r.prototype.start=function(){this.stop(),this._mutationObserver=new MutationObserver(this._mutationCallback),this._mutationObserver.observe(this._context._view,{attributes:!1,childList:!0,subtree:!0})},r.prototype.stop=function(){null!=this._mutationObserver&&(this._mutationObserver.disconnect(),this._mutationObserver=null)},H.exports=r},459:function(H,S,p){"use strict";const h=p(381),f=h("Zuix.js"),r=p(826),s=p(917),l=p(65),b=p(265),v=p(622),_=p(561),I=p(871),x=p(398),e=p(211)(),i=p(541);p(854);const n=[],o=[],u={},d=[],m={},y=[],z=function(t){return d[t]||(d[t]=new l(function(a,c,w){U(a,c,w)})),d[t]};let E=[],k=0,A=!1;const M=new b,j=[r.dom.queryAttribute(i.zContext),r.dom.queryAttribute(i.zOptions),r.dom.queryAttribute(i.zModel+",:model"),r.dom.queryAttribute(i.zOn+",:on"),r.dom.queryAttribute(i.zCss+",:css"),r.dom.queryAttribute(i.zBehavior+",:behavior"),r.dom.queryAttribute(i.zUsing+",:using"),r.dom.queryAttribute(i.zReady)];function L(){const t=this;return e.setHost(t),this._store={settings:{fetchOptions:{}},config:{title:"zUIx.js app",baseUrl:"/",resourcePath:"/app/",libraryPath:{"@lib":"https://zuixjs.github.io/zkit/lib/1.2/","@hgui":"https://genielabs.github.io/homegenie-web-ui/app/","@cdnjs":"https://cdnjs.cloudflare.com/ajax/libs/"},"zuixjs.github.io":{resourcePath:"/zuixjs/app",libraryPath:{"@lib":"https://zuixjs.github.io/zkit/lib/1.2/","@hgui":"https://genielabs.github.io/homegenie-web-ui/app/","@cdnjs":"https://cdnjs.cloudflare.com/ajax/libs/"}}},handlers:{sync:function(a,c,w,C){const N=c.attr("@sync")||c.attr(i.zField);c.on("keyup change keydown",function(){const O=c.get();let g=c.value();"checkbox"!==O.type&&"radio"!==O.type||O.checked||w[N]!=g||(g=""),w[N]!==g&&(w[N]=g)}),w[N]=c.value()},get:function(a,c,w,C){let N=c.attr("@get");const O=N.split(" as ");N=O[0];const g=O[1]||"result",R=t.runScriptlet(N,c,a);R!==w&&(N="const "+g+" = args; "+c.attr("@set"),t.runScriptlet(N,c,a,R),w=R),C(w)},set:function(a,c,w,C){c.attr("@get")||(t.runScriptlet(c.attr("@set"),c,a),C(w))},"disable-if":function(a,c,w,C){const N=c.attr("@disable-if"),O=t.runScriptlet(N,c,a);O!==w&&(c.attr({disabled:O?"":null}),w=O),C(w)},"hide-if":function(a,c,w,C){const N=c.attr("@hide-if"),O=t.runScriptlet(N,c,a);O!==w&&(c.css(O?{visibility:"hidden"}:{visibility:"visible"}),w=O),C(w)},if:function(a,c,w,C){const N=c.attr("@if"),O=t.runScriptlet(N,c,a);O!==w&&(t.runScriptlet(c.attr(O?"@then":"@else"),c,a),w=O),C(w)}}},this._fieldCache=[],this}function P(t){return"function"!=typeof t.for&&(t.for=function(a){return u[a]=t,t}),t}function T(t,a,c){c||(c=this),null==c._fieldCache&&(c._fieldCache={});let w=null;return void 0===c._fieldCache[t]?(w=s(a).find(r.dom.queryAttribute(i.zField,t)+",["+CSS.escape("#"+t)+"]"),w.length()&&(c._fieldCache[t]=w,1!==w.length()||w.field||(w.field=C=>T(C,w,w)))):w=c._fieldCache[t],w}function W(t,a){t=e.resolvePath(t);let c=null;return a?(a.componentId=t,a.contextId?(c=F(a.contextId),null!==c?c.options(a):c=Q(a)):(!1===a&&(a={}),a.contextId="zuix-ctx-"+ ++k,c=Q(a))):c=new v(zuix,a={},U),c.componentId!=t&&(c.componentId=t),a.ready&&(c.ready=a.ready),a.loaded&&(c.loaded=a.loaded),a.error&&(c.error=a.error),null==y[t]?(y[t]=!0,$(c,a)):(null==m[t]&&(m[t]=[]),m[t].push({c,o:a}),c)}function $(t,a){let c=le(t.componentId);null!==c&&null==a.controller&&null==t.controller()&&(t.controller(c.controller),f.t(t.componentId+":js","component:cached:js"));const w=function(C){!1!==a.css&&"string"!=typeof a.css?(C[t.componentId].step(t.componentId+":css"),t.loadCss({success:N=>c.css=N,error:N=>f.e(N,t),then:()=>ee(t,C[t.componentId])})):ee(t,C[t.componentId])};if(!a.view){if(a.html)t.view(a.html),f.t(t.componentId+":html","component:options:html");else if(null!==c&&(null!=c.view&&(t.view(c.view),f.t(t.componentId+":html","component:cached:html")),!1!==a.css&&"string"!=typeof a.css)){a.css=!1;const C=r.dom.getShadowRoot(t.container()||t.view());c.css_applied&&!C||(c.css_applied=!0,t.style(c.css),f.t(t.componentId+":css","component:cached:css"))}return"string"==typeof a.css&&(t.style(a.css),f.t(t.componentId+":css","component:options:css")),t.view()?z("resource-loader").queue(t.componentId+":css",function(){y[t.componentId]=this,w(y)},a.priority):z("resource-loader").queue(t.componentId+":html",function(){y[t.componentId]=this,t.loadHtml({cext:a.cext,success:C=>{null==c&&(c=V(t)),c.view=C,delete c.controller,w(y)},error:C=>{f.e(C,t),a.error&&t.error.call(t,C,t)}})},a.priority),t}return t.view(a.view),null==t.controller()?z("resource-loader").queue(t.componentId+":js",function(){y[t.componentId]=this,ee(t,y[t.componentId])},n.length):ee(t),t}function ie(t){const a=zuix.dumpContexts(),c=w=>{if(w instanceof Element){const C=w;w=zuix.context(C),e.dequeue(C)}if(w){const C=a.indexOf(w);-1!==C&&a.splice(C,1),w.$.find(`[${i.zLoaded}],[shadow]`).each((N,O)=>{r.catchContextError(w,()=>{ie(O)})}),r.catchContextError(w,()=>{w.dispose()})}};t&&t.each?t.each((w,C)=>c(C)):c(t)}function Q(t){const a=new v(zuix,t,U);return n.push(a),a}function F(t,a){let c=null;if(t instanceof s.ZxQuery&&(t=t.get()),t instanceof Element&&t.getAttribute("shadow")&&(t=t.getAttribute("shadow")),s.each(n,(w,C)=>{if(t===C.contextId||t instanceof Element&&(C.view()===t||C.container()===t))return c=C,!1}),a){const w=C=>setTimeout(()=>{a.call(C,C)},10);if(c&&c.isReady)w(c);else if("string"==typeof t){const C=s.find(r.dom.queryAttribute(i.zContext,t));C.length()&&F(C,N=>N?w(N):F(t,a))}else t instanceof Element&&zuix.$(t).one("component:ready",function(){c=n.find(C=>C.view()===t||C.container()===t),w(c)})}return c}function U(t,a,c){o[a]&&o[a].call(t,c,t)}function le(t){let a=null;return s.each(E,(c,w)=>{if(w.componentId===t)return a=w,!1}),a}function ee(t,a){if(void 0===t.options().controller&&null===t.controller())if(f.d(t.componentId,"controller:load"),a&&a.step(t.componentId+":js"),u[t.componentId])t.controller(u[t.componentId]),ce(t,a);else{const c=function(w){const C=t.componentId+".js",N=zuix.store("settings")?zuix.store("settings").fetchOptions:t.options().fetchOptions||void 0;fetch(zuix.getResourcePath(C),N).then(O=>O.text()).then(O=>{try{t.controller(O,{error:R=>{t.error&&t.error.call(t,R,t)},componentId:t.componentId});let g=le(t.componentId);null==g&&(g={componentId:t.componentId,controller:t.controller()},E.push(g))}catch(g){f.e(new Error,g,O,t),t.error&&t.error.call(t,g,t)}}).catch(O=>{f.e(O,new Error,t),t.error&&t.error.call(t,O,t)}).finally(()=>{ce(t,w)})};a?c(a):z("resource-loader").queue(t.componentId+":js",function(){c(y[t.componentId]=this)},t.options().priority)}else ce(t,a)}function V(t){const a=t.view().innerHTML,c=s.wrapElement("div",a),w={componentId:t.componentId,view:c.innerHTML,css:t._css||t.options().css,controller:t.controller()};return E.push(w),f.t(t.componentId,"bundle:added"),w}function ce(t,a){if(y[t.componentId]=null,t.view()){let c=le(t.componentId);t.options().viewDeferred?f.d(t.componentId,"component:deferred:load"):null===c?c=V(t):null==c.controller&&(c.controller=t.controller());const w=s(t.view());if(null==w.attr(i.zContext)&&w.attr(i.zContext,t.contextId),f.d(t.componentId,"component:initializing"),t.controller()){const C=t._c=new _(t);C.log=h(t.contextId);const N=()=>{a&&f.d(t.componentId,"controller:create:deferred"),function(O){const g=O.context;f.t(g.componentId,"controller:init","timer:init:start"),g.isReady=!0;const R=O.view();O.create&&r.catchContextError(g,()=>{O.create()}),O.trigger("view:create",R),(()=>{if(g.loaded&&r.catchContextError(g,()=>{g.loaded.call(g,g)}),null!=m[g.componentId]){const J=m[g.componentId];let X;for(m[g.componentId]=null;null!=J&&null!=(X=J.shift());)$(X.c,X.o)}const q=r.dom.queryAttribute(i.zLoaded,"false",r.dom.cssNot(i.zComponent));R.find(q).each(function(J,X){this.attr(i.zLoaded,null)}),setTimeout(()=>zuix.componentize(R))})(),O.trigger("component:loaded",R,!0);const ye=()=>{zuix.context(R)===g&&R.find("*").each((q,J,X)=>{var he,Y;oe(R,X)&&(he=g,Y=X,Array.from(Y.get().attributes).forEach(de=>{let D=de.nodeValue;const ne=de.nodeName;if(D&&ne.startsWith("(")&&ne.endsWith(")")){D.match(/^[^<>()\[\]\-+\s!?/&\xa3"=^#@:;,.*|]+$/g)||(D=`(event, args) => { ${de.nodeValue} }`);const se=ne.substring(1,ne.length-1),K=zuix.runScriptlet(D,Y,R,null);Y===R?he.on(se,K):Y.on(se,K)}}))}),g.ready&&r.catchContextError(g,()=>{g.ready.call(g,g)}),O.trigger("component:ready",R,!0)},G=zuix.store("handlers"),Z=g.contextId,te=R.find(':scope > [type="jscript"]');te._selection=te._selection.concat(s(document).find('[type="jscript"][for="'+Z+'"]')._selection),g.handlers.refresh=(q,J,X,he)=>{if(!g._disposed){if(g._dependencyResolver&&!g._dependencyResolver.resolved())return g.$.hasClass("not-ready")||g.$.addClass("not-ready"),he(X);null!=g._dependencyResolver&&!1!==g._dependencyResolver&&(g.$.removeClass("not-ready"),g._dependencyResolver=!1);let Y=g._refreshHandler;if(!Y){const de="return (function($this, context, args){const $ = context.$; const model = context.model(); const trigger = (ep, ed) => context._c.trigger(ep, ed); ";let D='"use strict"; expose = {}; ';g["#"]&&s.each(g["#"],(pe,fe)=>{const B=r.hyphensToCamelCase(pe);D+="const $"+B+' = context["#"].'+B+";",D+="const "+B+" = $"+B+".get();",D+="let _"+B+" = null; zuix.context("+B+", function(c) { _"+B+" = c; });",D+="if ("+B+") new MutationObserver((a,b) => { zuix.context("+B+", function(c) { _"+B+" = c; });}).observe("+B+',{attributes:true,attributeFilter: ["shadow"]});'}),g._?(s.each(g._,(pe,fe)=>{D+="const "+pe+' = context["_"].'+pe+";"}),void 0===g._.refresh&&(D+="function refresh() {}; "),void 0===g._.ready&&(D+="function ready() { return true; }; ")):(D+="function refresh() {}; ",D+="function ready() { return true; }; "),D+="function runScriptlet($el, s, args) { let result; try { result = eval(\"const $this = $el; const _this = zuix.context(this); \" + s) } catch (e) { if (!$el._lastError || $el._lastError.toString() !== e.toString()) { context._error = e; console.error('SCRIPTLET ERROR', e, '\\n', context, this, '\\n', s); if (context.error) context.error(e); } $el._lastError = e; }; return result };";const ne=[];let se="";ne.push(Z),te.each((pe,fe,B)=>{zuix.context(q)===g&&(null!=B.attr("using")&&ne.push(...B.attr("using").split(/[;|,]+/g)),B.parent().get()!==q.get()&&B.attr("for")!==Z||(se+=B.html()+";",fe.remove()))}),null!=g.options().using&&ne.push(...g.options().using.split(/[;|,]+/g));let K="";if(ne.length>0){let pe="";if(ne.forEach(fe=>{const B=fe.split(" as ");fe=B[0];const me=r.hyphensToCamelCase(B[1])||r.hyphensToCamelCase(fe),ge="let "+me+' = window["'+me+'"]; if ('+me+' == null) { const tc = zuix.context("'+fe+'"';K+=!1!==g._dependencyResolver?ge+", (ctx) => "+me+" = ctx);":ge+");",K+="if (tc && tc.isReady) "+me+" = tc; }",pe+=me+" && "}),!1!==g._dependencyResolver&&K.length>0&&(K+="const resolved = function() { return "+pe+"true; };",g._dependencyResolver=Function(de+K+"; return { resolved }; }).call(this.$el.get(), this.$el, this.ctx, this.args);").call({$el:J,ctx:g,args:null}),!g._dependencyResolver.resolved()&&he))return he(X)}D+=K+se;const ae=D+"; return { refresh, runScriptlet, ready, expose }; }).call(this.$el.get(), this.$el, this.ctx, this.args);";r.catchContextError(g,()=>{Y=g._refreshHandler=Function(de+";"+ae).call({$el:J,ctx:g,args:null}),Y.expose&&Object.assign(g,Y.expose)})}!g._dependencyResolver&&Y.refresh&&g._refreshHandler.refresh(),he&&he(X)}};const re=[];if(R.find("*").each((q,J,X)=>{oe(R,X)&&zuix.context(R)===g&&re.push(...((he,Y)=>{const de=Y.get(),D=[];for(let ne=0;ne<de.attributes.length;ne++){const se=de.attributes.item(ne).name;if(se.length>1&&se.startsWith("@")){const K=se.substring(1).split(":")[0];let ae=g.handlers?g.handlers[K]:null;if(ae||(ae=G[K]),ae){const pe=zuix.activeRefresh(he,Y,O.model(),(fe,B,me,ge)=>{Y.attr(i.zLoad)&&"true"!==Y.attr(i.zReady)?null==zuix.context(Y)&&ge(me):ae.call(de,he,Y,me,ge,se)});D.push(pe)}}}return D})(R,X))}),re.length>0||te.length()){const q=te.length()?te.attr("refreshdelay"):null,J=te.length()?te.attr("handlersdelay"):null;g.handlers.refresh.call(R.get(),R,R,O.model(),(X,he)=>{zuix.activeRefresh(R,R,X,(Y,de,D,ne)=>{if(g._refreshHandler&&!g._refreshHandler.initialized){let se=!0;re.forEach(ae=>{if(null!=ae.$element.attr(i.zLoad))return se=null!=zuix.context(ae.$element)&&zuix.context(ae.$element).isReady,se});let K=se&&!0===g.isReady;r.catchContextError(g,()=>{K=K&&g._refreshHandler.ready()},ae=>{K=!1}),K?(g._refreshHandler.initialized=!0,re.forEach(ae=>ae.start(J)),g.$.removeClass("not-ready"),ye()):g.$.hasClass("not-ready")||g.$.addClass("not-ready"),ne(D,q,!0)}else null==g._error&&g.handlers.refresh.call(R.get(),R,R,D,ne)}).start(q)})}else null==g._error&&(g.handlers.refresh.call(R.get(),R,R),ye());f.t(g.componentId,"controller:init","timer:init:stop"),f.i(g.componentId,"component:loaded",Z)}(C),a&&a.end(),w.attr(i.zReady,"true")};if(C.init){let O=!1;if(r.catchContextError(t,()=>{C.init()},g=>{N(),O=!0}),O)return}if(C.view()&&null==C.view().attr(i.zComponent)&&C.view().attr(i.zComponent,""),null==t.model()&&t.view()&&t.viewToModel(),t.options().viewDeferred){t.options().viewDeferred=!1,C.saveView(),null===c&&"default"!==t.componentId&&(c={componentId:t.componentId,controller:t.controller()},E.push(c),f.t(t.componentId,"bundle:added"),f.d(t.componentId,"component:deferred:load"));const O=()=>{!1!==t.options().html?("string"==typeof t.options().html&&(c.view=t.options().html),null==c.view?t.loadHtml({cext:t.options().cext,success:g=>{c.view=g,f.d(t.componentId,"component:deferred:html")},error:g=>{f.e(g,t),t.options().error&&t.options().error.call(t,g,t)},then:()=>{f.d(t.componentId,"controller:create:2"),N()}}):(t.view(c.view),N())):(f.d(t.componentId,"controller:create:3"),N())};!1!==t.options().css&&"string"!=typeof t.options().css?null==c.css?t.loadCss({success:g=>{c.css=g,f.d(t.componentId,"component:deferred:css")},then:()=>O()}):(t.style(c.css),O()):("string"==typeof t.options().css&&t.style(t.options().css),O())}else f.d(t.componentId,"controller:create:1"),N()}else f.w(t.componentId,"component:controller:undefined")}else f.e(t.componentId,"component:view:undefined")}function oe(t,a){const c=[...j,r.dom.queryAttribute(i.zLoad)].join(",");return a.parent("pre,code,"+c).get()===t.get()}function ue(t,a){let c=w=>{};if("string"==typeof t)try{const w=Function(r.normalizeControllerCode(t))();if("function"!=typeof w)throw new Error('Unexpected controller type: "'+typeof w+'"');c=w}catch(w){a&&"function"==typeof a.error&&a.error(w),f.e(this,w,t)}return c}L.prototype.field=function(t,a,c){return T.call(this,t,a,c)},L.prototype.load=function(t,a){return W.call(this,t,a)},L.prototype.unload=function(t){return ie(t),this},L.prototype.loadComponent=function(t,a,c,w){return N=a,O=c,g=w,ie(C=s(C=t)),C.each((R,ye,G)=>{!0!==G.attr(i.zLoaded)&&!1!==G.attr(i.zLoaded)&&function(Z){if(Z.attr(i.zLoad,N),O&&Z.attr(O,""),g&&g.lazyLoad&&"true"===g.lazyLoad.toString()||"true"===Z.attr(i.zLazy))return g&&(Z.get().__zuix_loadOptions=g),!1;let te=Z.get().shadowRoot;if(null==te&&g&&g.container instanceof ShadowRoot?(te=g.container,g.__shadowRoot=Z,delete g.container):te&&g&&delete g.container,te){const re=document.createElement("div");Array.from(Z.get().attributes).forEach(q=>{if(!q.nodeName.match(/^[(#@)]/))try{re.setAttribute(q.nodeName,q.nodeValue),q.nodeName!==i.zField&&Z.attr(q.nodeName,null)}catch(J){console.error(J)}}),setTimeout(()=>{for(;Z.get().firstChild;)re.appendChild(Z.get().firstChild);try{te.appendChild(re)}catch(q){return void console.error(q)}e.loadInline(re,g),zuix.context(re,q=>{Z.attr("shadow",q.contextId)})})}else e.loadInline(Z,g)}(G)}),this;var C,N,O,g},L.prototype.controller=function(t,a){return"string"==typeof t&&(a&&a.componentId&&(t+='\n//# sourceURL="'+a.componentId+'.js"\n'),t=ue(t,a)),a&&a.componentId&&(u[a.componentId]=t),P.call(this,t)},L.prototype.context=function(t,a){return F.call(this,t,a)},L.prototype.trigger=function(t,a,c){return U(t,a,c),this},L.prototype.hook=function(t,a){var c,w;return c=t,(w=a)?(o[c]&&f.w("Hook override",'"'+c+'"',"OLD",o[c],"NEW",w),o[c]=w):delete o[c],this},L.prototype.using=function(t,a,c,w){a=e.resolvePath(a);const C=(t=t.toLowerCase())+"-"+a.hashCode();return z("resource-loader").queue(C,function(){const N=y[C]=this;if("component"===t){const O=F(C);null==O?zuix.load(a,{contextId:C,view:"",priority:-10,ready:g=>{N.end(),c&&c(a,g)},error:()=>{N.end(),c&&c(a,null)}}):(N.end(),c&&c(a,O))}else{const O="style"===t,g=O&&w&&r.dom.getShadowRoot(w.container()||w.view()),R=g||void 0;if(0===s(R).find(t+'[id="'+C+'"]').length()){const ye=R||document.head||document.getElementsByTagName("head")[0],G=document.createElement(t);O?(G.type="text/css",G.id=C):(G.type="text/javascript",G.id=C),ye.appendChild(G);const Z=q=>{if(O)g&&(q=q.replace(/:root/g,":host")),G.styleSheet?G.styleSheet.cssText=q:G.appendChild(document.createTextNode(q));else{const J=window.define;window.define=void 0,G.innerText?G.innerText=q:G.appendChild(document.createTextNode(q)),window.define=window.define||J}N.end(),c&&c(a,C)},te="_res/"+t+"/"+C,re=le(te);if(null!=re)Z(O?re.css:re.controller);else{const q=zuix.store("settings")?zuix.store("settings").fetchOptions:w?w.options().fetchOptions:void 0;fetch(a,q).then(J=>J.text()).then(J=>{E.push({componentId:te,view:null,css:O?J:null,controller:O?null:J,using:a}),Z(J)}).catch(()=>{ye.removeChild(G),N.end(),c&&c(a,null)})}}else N.end(),c&&c(a,C)}}),this},L.prototype.lazyLoad=function(t,a){return null==t?e.lazyLoad():(e.lazyLoad(t,a),this)},L.prototype.componentize=function(t){return!1===t?A=!0:!0===t&&(A=!1,t=null),A||e.componentize(t),this},L.prototype.store=function(t,a){return null!=a&&(this._store[t]=a),this._store[t]},L.prototype.getResourcePath=t=>function(a){let c=zuix.store("config");return null!=c&&null!=c[location.host]&&(c=c[location.host]),!(a=e.resolvePath(a)).startsWith("/")&&a.indexOf("://")<0&&(a=(null!=c&&null!=c.resourcePath?c.resourcePath:"")+a),a}(t),L.prototype.observable=t=>M.observable(t),L.prototype.activeRefresh=(t,a,c,w)=>new x(t,a,c,w),L.prototype.bundle=function(t,a){if(!t)return E;if(t&&"boolean"==typeof t){f.t("bundle:start");const c=e.lazyLoad();if(e.lazyLoad(!1),e.componentize(),a){const w=C=>{setTimeout(()=>{e.willLoadMore()?(f.t("bundle:wait"),C(C)):(f.t("bundle:end"),e.lazyLoad(c),a())},1e3)};w(w)}}else{for(let c=0;c<t.length;c++)t[c].css_applied&&delete t[c].css_applied,"string"==typeof t[c].controller&&(t[c].controller=ue(t[c].controller));E=t}return this},L.prototype.$=s,L.prototype.TaskQueue=l,L.prototype.ObjectObserver=b,L.prototype.ZxQuery=s.ZxQuery,L.prototype.setComponentCache=t=>{E=t},L.prototype.dumpCache=()=>E,L.prototype.dumpContexts=()=>n,L.prototype.isDirectComponentElement=(t,a)=>oe(t,a),L.prototype.resolveImplicitLoad=t=>{const a=r.dom.cssNot(i.zLoad).get(),c=r.dom.cssNot(i.zReady).get(),w=j.map(C=>C+a+c).join(",");s(t).find(w).each((C,N,O)=>{-1===N.tagName.indexOf("-")&&null==O.attr(i.zLoad)&&O.attr(i.zLoad,"default").attr(i.zLazy,"false")})},L.prototype.runScriptlet=(t,a,c,w)=>{const C=zuix.context(c);if(C&&C._refreshHandler&&a.get().isConnected)return C._refreshHandler.runScriptlet.call(a.get(),a,t,w)},L.prototype.utils=r,H.exports=()=>{if(window&&window.zuix)return window.zuix;const t=new L;if(window&&document){window.zuix=t,t.$.appendCss('[z-view]{display:none;}[type="jscript"],[media*="#"]{display:none;}[z-load][z-ready=true].visible-on-ready{opacity:1}[z-load]:not([z-ready=true]).visible-on-ready{opacity:0;visibility:hidden}',null,"zuix-global");const c=()=>t.componentize();window.ControllerInstance=I,window.addEventListener("load",c),window.addEventListener("resize",c),window.addEventListener("pageshow",c),"loading"!==document.readyState&&c()}return f.monitor(function(a,c){t.monitor&&t.monitor(a,Array.prototype.slice.call(c))}),t}}},_e={},ve=function H(S){var p=_e[S];if(void 0!==p)return p.exports;var h=_e[S]={exports:{}};return be[S](h,h.exports,H),h.exports}(693);zuix=ve}();