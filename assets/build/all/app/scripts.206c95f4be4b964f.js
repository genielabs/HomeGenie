var zuix;!function(){var ze={381:function(F){"use strict";const W="background-color:rgba(200,200,200,0.2);";let z=null,N=null,S=null;function y(b){z=window?window.console:{},N=window||{},this._timers={},this.args=function(C,e,n){let s="%c "+e+" %c"+(new Date).toISOString()+" %c"+C;const c=[W+"color:#8a53ff;",W+"color:#777777",W+"color:#888888;"];for(let a=0;a<n.length;a++)if("string"==typeof n[a]&&0===n[a].indexOf("timer:")){const d=n[a].split(":");if(3===d.length){let f;switch(d[2]){case"start":this._timers[d[1]]=(new Date).getTime(),s+=" %cSTART "+d[1],c.push(W+"color:#999900;");break;case"stop":f=(new Date).getTime()-this._timers[d[1]],s+=" %cSTOP "+d[1]+" "+f+" ms",c.push(f>200?W+"color:#ff0000;":f>100?W+"color:#ff7700;":W+"color:#00aa00;")}}}s+=" \n%c ",c.push("background-color:transparent;color:inherit;");for(let a=c.length-1;a>=0;a--)Array.prototype.unshift.call(n,c[a]);Array.prototype.unshift.call(n,s),Array.prototype.push.call(n,"\n\n")},this.log=function(C,e){S&&S.call(b,C,e),(N.__zuix__debug||"ERROR"===C||"WARN"===C)&&(this.args(b,C,e),z.log(...e))}}y.prototype.monitor=function(b){S=b},y.prototype.i=y.prototype.l=y.prototype.log=y.prototype.info=function(...b){return this.log("INFO",b),this},y.prototype.w=y.prototype.warn=function(...b){return this.log("WARN",b),this},y.prototype.e=y.prototype.error=function(...b){return this.log("ERROR",b),this},y.prototype.d=y.prototype.debug=function(...b){return this.log("DEBUG",b),this},y.prototype.t=y.prototype.trace=function(...b){return this.log("TRACE",b),this},F.exports=function(b){return new y(b)}},65:function(F,W,p){"use strict";const h=p(381)("TaskQueue.js");function m(u){const r=this;r._worker=null,r._taskList=[],r._requests=[],null==u&&(u=function(){}),r.taskQueue=function(l,w,_){r._taskList.push({tid:l,fn:w,status:0,priority:_,step:function(z){h.t(z,"load:step"),u(r,"load:step",{task:z})},end:function(){this.status=2,h.t(this.tid,"load:next","timer:task:stop"),u(r,"load:next",{task:this.tid}),r._taskList.splice(this.index,1),r.taskCheck(),null!=this._callback&&this._callback.call(this)},callback:function(z){this._callback=z}}),h.t(l,"task added",_,"priority"),r._taskList.sort(function(z,N){return z.priority>N.priority?1:N.priority>z.priority?-1:0}),r.taskCheck()},r.taskCheck=function(){for(let l=0;l<r._taskList.length;l++){if(0===r._taskList[l].status)return r._taskList[l].status=1,h.t(r._taskList[l].tid,"load:begin","timer:task:start"),u(r,"load:begin",{task:r._taskList[l].tid}),r._taskList[l].index=l,void r._taskList[l].fn.call(r._taskList[l]);if(1===r._taskList[l].status)return;if(2===r._taskList[l].status)return}h.t("load:end"),u(r,"load:end")}}m.prototype.callback=function(u){},m.prototype.queue=function(u,r,l){return this.taskQueue(u,r,l)},F.exports=m},826:function(F){"use strict";F.exports={isNoU:p=>typeof p>"u"||null===p,propertyFromPath(p,h){if("string"!=typeof h||null==p)return;try{if(typeof p[h]<"u")return p[h]}catch(l){console.log(l)}let m=p,u="";const r=h.match(/\[(".*?"|'.*?'|(.*?))\]|".*?"|'.*?'|[0-9a-zA-Z_$]+/g);for(let l=0;l<r.length;l++){let _,w=r[l];w.startsWith("[")&&w.endsWith("]")&&(w=w.substring(1,w.length-1).trim()),(w.startsWith('"')&&w.endsWith('"')||w.startsWith("'")&&w.endsWith("'"))&&(w=w.substring(1,w.length-1)),u+=w;try{_=m[w]}catch{}if(!(typeof _<"u"))return;m=_,u+="->"}return m},cloneObject(p){if(null===p||"object"!=typeof p)return p;let h=p;try{h=p.constructor();for(const m in p)p.hasOwnProperty(m)&&(h[m]=this.cloneObject(p[m]))}catch{}return h},hasPassiveEvents(){let p=!1;try{const h=Object.defineProperty({},"passive",{get:function(){p=!0}});window.addEventListener("testPassive",null,h),window.removeEventListener("testPassive",null,h)}catch{}return p},hyphensToCamelCase:p=>"string"==typeof p?p.replace(/--/g,":").replace(/-([a-z0-9_$-])/g,function(h){return"_$-".indexOf(h[1])>-1||(+h[1]).toString()===h[1]?"_"+h[1].replace("-","_"):h[1].toUpperCase()}).replace(/:/g,"-"):p,camelCaseToHyphens:p=>"string"!=typeof p?p:(p=p.replace(/(^\w)|(\s+\w)/g,function(h){return h.toUpperCase()}).replace(/\s/g,"")).split(/(?=[A-Z])/).join("-").toLowerCase(),normalizeControllerCode(p){if(p.indexOf("module.exports")>=0)return"'use strict'; let module = {}; "+p+";\nreturn module.exports;";{let h=p;const m=p.indexOf("function "),u=p.indexOf("zuix.controller"),r=p.indexOf("class ");return r>=0&&(r<m||-1===m)&&(r<u||-1===u)?h=p.substring(0,r)+"return "+p.substring(r):m>=0&&(m<u||-1===u)?h=p.substring(0,m)+"return "+p.substring(m):-1!==u&&(h=p.substring(0,u)+"return "+p.substring(u+15)),h}},catchContextError(p,h,m){try{h()}catch(u){p._error=u,m&&m(u),u&&p.options().error?p.options().error.call(p,u,p):console.error(u)}},dom:{queryAttribute(p,h,m){const u=p.split(/[\s|,]+/g);let r="";return u.forEach(function(l,w){r+=null!=h?"["+CSS.escape(l)+'="'+h+'"]':"["+CSS.escape(l)+"]",m&&(r+=m.get(w)),w<u.length-1&&(r+=",")}),r},getAttribute(p,h){let m;if("string"==typeof h&&-1!==h.indexOf(",")){const u=h.split(/[\s|,]+/g);for(let r=0;r<u.length;r++){const w=p.getAttribute(u[r]);if(null!=w){m=w;break}}}else m=p.getAttribute(h);return m},setAttribute(p,h,m){if("string"==typeof h&&-1!==h.indexOf(",")){const u=h.split(/[\s|,]+/g),r=this;u.forEach(function(l){r.setAttribute(p,l,m)})}else null===m?p.removeAttribute(h):p.getAttribute(h)!==m&&p.setAttribute(h,m)},cssNot(p,h){const m=p.split(",");let u="";return m.forEach(function(r,l){r.startsWith(".")?u+=":not("+r+")":u+=null!=h?":not(["+r+'="'+h+'"])':":not(["+r+"])",l<m.length-1&&(u+=",")}),r=u,{get(l){const w=r.split(",");return l>=w.length||null==l?w[0]:w[l]},getAll:()=>r.split(",").join("")};var r},getShadowRoot(p){for(;p;p=p.parentNode)if(p instanceof ShadowRoot)return p;return!1}}}},917:function(F,W,p){"use strict";const h=p(381)("TaskQueue.js"),m=p(826),u=m.hasPassiveEvents(),r=[];function l(e){!function z(e,n,s){const c=C(e);C.each(r,function(){this.element===e&&this.path===n&&this.handler.call(c,s,c)})}(this,e.type,e)}function _(e,n,s){let c=1,a=-1;C.each(r,function(d){this.element===e&&this.path===n&&(c--,this.handler===s&&(a=d))}),-1!==a&&r.splice(a,1),0===c&&e.removeEventListener(n,l)}function S(e,n,s){let c=s.classes;return"string"==typeof s?(c=s.split(/[\s|,]+/g),s={}):Array.isArray(s)&&(c=s,s={}),Object.assign({type:e,classes:c,target:n},s)}function y(e){if(this._selection=[],typeof e>"u"&&(e=document.documentElement),e instanceof y)return e;if(e instanceof HTMLCollection||e instanceof NodeList){const n=this._selection=[];C.each(e,function(s,c){n.push(c)})}else if(Array.isArray(e))this._selection=e;else if(e===window||e instanceof HTMLElement||e instanceof Node)this._selection=[e];else if("string"==typeof e)this._selection=document.documentElement.querySelectorAll(e);else if(null!==e){const n="ZxQuery cannot wrap object of this type.";throw h.e(n,typeof e,e),new Error(n)}return this}function b(e){return new y(e)}y.prototype.length=function(){return this._selection.length},y.prototype.parent=function(e){return new y(e?C.getClosest(this._selection[0],e):this._selection[0].parentNode)},y.prototype.children=function(e){return new y(e?this._selection[0].querySelectorAll(e):this._selection[0].children)},y.prototype.reverse=function(){const e=Array.prototype.slice.call(this._selection,0);return this._selection=e.reverse(),this},y.prototype.get=function(e){return e||(e=0),this._selection[e]},y.prototype.eq=function(e){const n=this._selection;let s=n[e];return arguments.length>1&&(s=[],C.each(arguments,function(c,a){null!=n[a]&&s.push(n[a])})),new y(s)},y.prototype.prev=function(){return new y(this._selection[0].previousElementSibling)},y.prototype.next=function(){return new y(this._selection[0].nextElementSibling)},y.prototype.index=function(e){const n=this._selection[0];return 1===this.length()&&null==e?Array.from(this.parent().children()._selection).indexOf(n):this.length()&&null!=e?this._selection.indexOf(e.get()):-1},y.prototype.find=function(e){return this._selection[0]?new y(this._selection[0].querySelectorAll(e)):new y},y.prototype.each=function(e){return C.each(this._selection,e),this},y.prototype.attr=function(e,n){const s=this;if("object"==typeof e)C.each(e,(c,a)=>{s.each((d,f)=>m.dom.setAttribute(f,c,a))});else{if(typeof n>"u")return m.dom.getAttribute(this._selection[0],e);this.each((c,a)=>m.dom.setAttribute(a,e,n))}return this},y.prototype.trigger=function(e,n){const s=new CustomEvent(e,{detail:n});return this.each(function(c,a){a.dispatchEvent(s)}),this},y.prototype.one=function(e,n){const s=this;return"object"==typeof e&&null==n?(C.each(e,(a,d)=>{s.one(a,d)}),this):(this.on(e,new function(a,d){let f=!1;return function(O,R){f||(f=!0,C(s).off(a,this),d.call(s,O,R,s))}}(e,n)),this)},y.prototype.on=function(e,n){if("object"==typeof e&&null==n){const a=this;return C.each(e,(d,f)=>a.on(d,f)),this}const s=e.split(/[\s|,]+/g)||[];let c;return n&&"function"!=typeof n&&(c=n,n=c.handler),this.each((a,d)=>s.map(f=>function w(e,n,s,c){let a=!1;C.each(r,function(){if(this.element===e&&this.path===n&&this.handler===s)return h.w("Handler already registered",e,n,s),a=!0,!1}),a||(r.push({element:e,path:n,handler:s,options:c}),e.addEventListener(n,l,!(!u||null!=c&&!1===c.passive)&&{passive:!0}))}(d,f,n,c))),this},y.prototype.off=function(e,n){if("object"==typeof e&&null==n){const c=this;return C.each(e,(a,d)=>c.off(a,d)),this}const s=e.split(/[\s|,]+/g)||[];return this.each((c,a)=>s.map(d=>_(a,d,n))),this},y.prototype.reset=function(){return this.each((e,n)=>function N(e){C.each(r.slice(),function(){this.element===e&&(h.t("Removing event handler",this.element,this.path,this.handler),_(this.element,this.path,this.handler))})}(n)),this},y.prototype.isEmpty=function(){return 0===this._selection[0].innerHTML.replace(/\s/g,"").length},y.prototype.position=function(){return C.getPosition(this._selection[0])},y.prototype.css=function(e,n){if("object"==typeof e)C.each(e,(s,c)=>this.each((a,d)=>d.style[s]!==c?d.style[s]=c:null));else{if(m.isNoU(n))return this._selection[0].style[e];this.each((s,c)=>c.style[e]!==n?c.style[e]=n:null)}return this},y.prototype.addClass=function(e){const n=e.split(/[\s|,]+/g)||[];return C.each(this._selection,(s,c)=>n.map(a=>c.classList.add(a))),this},y.prototype.hasClass=function(e){return C.hasClass(this._selection[0],e)},y.prototype.removeClass=function(e){const n=e.split(/[\s|,]+/g)||[];return C.each(this._selection,(s,c)=>n.map(a=>c.classList.remove(a))),this},y.prototype.html=function(e){return m.isNoU(e)?this._selection[0].innerHTML:(this.each((n,s)=>s.innerHTML!==e?s.innerHTML=e:null),this)},y.prototype.checked=function(e){if(m.isNoU(e)){const n=this._selection[0].checked;return null!=n&&"false"!=n&&(n||"checked"==n)}return this.each((n,s)=>s.checked!==e?s.checked=e:null),this},y.prototype.value=function(e){return m.isNoU(e)?this._selection[0].value:(this.each((n,s)=>s.value!==e?s.value=e:null),this)},y.prototype.append=function(e){return"string"==typeof e?this._selection[0].innerHTML+=e:this._selection[0].appendChild(e instanceof y?e.get():e),this},y.prototype.insert=function(e,n){n=n instanceof y?n.get():n;const s=this.children().get(e);return null!==s?this._selection[0].insertBefore(n,s):this._selection[0].appendChild(n),this},y.prototype.prepend=function(e){return"string"==typeof e?this._selection[0].innerHTML=e+this._selection[0].innerHTML:this._selection[0].insertBefore(e instanceof y?e.get():e,this._selection[0].firstElementChild),this},y.prototype.detach=function(){const e=this._selection[0],n=e.parentNode;return null!=n&&(e.__zuix_oldParent=n,e.__zuix_oldIndex=Array.prototype.indexOf.call(n.children,e),n.removeChild(e),h.t("Detached from parent",n,e)),this},y.prototype.attach=function(){const e=this._selection[0];return null!=e.parentNode&&null!=e.__zuix_oldParent&&e.parentNode.removeChild(e),null==e.parentNode&&null!=e.__zuix_oldParent&&(C(e.__zuix_oldParent).insert(e.__zuix_oldIndex,e),e.__zuix_oldParent=null,delete e.__zuix_oldParent,delete e.__zuix_oldIndex),this},y.prototype.display=function(e){return m.isNoU(e)?this._selection[0].style.display:(C.each(this._selection,(n,s)=>s.style.display=e),this)},y.prototype.visibility=function(e){return m.isNoU(e)?this._selection[0].style.visibility:(C.each(this._selection,(n,s)=>s.style.visibility=e),this)},y.prototype.show=function(e){return this.display(e??"")},y.prototype.hide=function(){return this.display("none")},y.prototype.playTransition=function(e){return C.playFx(S("transition",this,e)),this},y.prototype.playAnimation=function(e){return C.playFx(S("animation",this,e)),this},y.prototype.isPlaying=function(){return this.hasClass("--z-playing")};const C=b;b.find=function(e){return C().find(e)},b.each=function(e,n){const s=null==e?0:Object.keys(e).length;if(s>0){let c=0;for(const a in e)if(e.hasOwnProperty(a)){let d=e[a];if(d instanceof Element&&(d=C(d)),!1===n.call(d,a,e[a],d)||(c++,c>=s))break}}return this},b.hasClass=function(e,n){const s=n.split(/[\s|,]+/g)||[];let c=!1;return C.each(s,(a,d)=>{if(c=e.classList.contains(d),c)return!1}),c},b.classExists=function(e){const n=e.split(/[\s|,]+/g)||[];let s=!1;return C.each(n,(c,a)=>{const d=document.styleSheets;if(d)for(let f=0;f<d.length;f++)try{const O=d[f].cssRules;if(null!=O)for(let R=0;R<O.length;R++)if(O[R].selectorText===a){s=!0;break}}catch(O){if("SecurityError"!==O.name&&"InvalidAccessError"!==O.name)throw O}}),s},b.wrapElement=function(e,n){const s=document.createElement(e);return"string"==typeof n?s.innerHTML=n:s.appendChild(n),s},b.wrapCss=function(e,n,s){const c=/(([a-zA-Z0-9\240-\377=:-_- \n,.@]+.*){([^{}]|((.*){([^}]+)[}]))*})/g;let d,a="";n=(n=n.replace(/\/\*[\s\S]*?\*\/|([^:]|^)\/\/.*$/g,"")).replace(/(?:\r\n|\r|\n)/g,"").replace(/}/g,"}\n").replace(/\{/g,"{\n");do{if(d=c.exec(n),d&&d.length>1){let f=d[2];if(null!=f&&f.length>0){f=f.replace(/\n/g,"");const O=f.split(",");let R=!1;if(C.each(O,(j,H)=>{if("."===H.trim()||":host"===H.trim())a+="\n[z-component]"+e+" ";else if("@"===H.trim()[0])a+=H+" ",(H.trim().toLowerCase().startsWith("@media")||H.trim().toLowerCase().startsWith("@supports"))&&(R=!0);else if(s)H.split(/\s+/).forEach(function(k){(k=k.trim()).lastIndexOf(".")>0?k.replace(/(?=\.)(?![^\[\]()]*(?:\[[^\[\]()]*([\])]))?([\])]))/gi,",").split(",").forEach(function(M){a+=""!==M?M+e:"\n"}):a+=""!==k&&">"!==k&&"*"!==k?"\n"+k+e+" ":k+" "});else{let k=H.trim();k=k.startsWith(":host")?k.substring(5):"\n"+k,a+="\n[z-component]"+e+k+" "}j<O.length-1&&(a=a.trim()+", ")}),R){const j=C.wrapCss(e,d[1].substring(d[2].length).replace(/^{([^\0]*?)}$/,"$1"),s);a+="{\n  "+j+"\n}\n"}else a+=d[1].substring(d[2].length)+"\n"}else h.w("z$.wrapCss was unable to parse rule.",f,d)}}while(d);return""!==a&&(n=a),n},b.appendCss=function(e,n,s,c){const a=c||document.head||document.getElementsByTagName("head")[0];let d=null;if(n&&a.contains(n))a.removeChild(n);else{const f=document.getElementById(s);f&&a.contains(f)&&a.removeChild(f)}return"string"==typeof e?(d=document.createElement("style"),d.id=s,d.appendChild(document.createTextNode(e))):e instanceof Element&&(d=e),d&&a.appendChild(d),d},b.replaceBraces=function(e,n){const s=new RegExp(/{?{.*?}?}/g);let f,c="",a=0,d=0;for(;f=s.exec(e);){if("string"==typeof f[0]&&(0===f[0].trim().length||f[0].indexOf("\n")>=0)){const R=e.substring(d,f.index)+f[0];c+=R,d+=R.length;continue}let O=f[0];if(n){const R=n(f[0]);null!=R&&(O=R,a++)}c+=e.substring(d,f.index)+O,d=f.index+f[0].length}return a>0?(c+=e.substring(d),c):null},b.getClosest=function(e,n){for(e=e.parentNode;e&&e!==document;e=e.parentNode)if(e.matches&&e.matches(n))return e;return null},b.getPosition=function(e,n){const s="--ui--visible",c=function(){let f=0,O=0;const R=e.getBoundingClientRect();let j=e;for(;j;){if("body"===j.tagName.toLowerCase()){const H=j.scrollLeft||document.documentElement.scrollLeft,k=j.scrollTop||document.documentElement.scrollTop;f+=j.offsetLeft-H+j.clientLeft,O+=j.offsetTop-k+j.clientTop}else f+=j.offsetLeft-j.scrollLeft+j.clientLeft,O+=j.offsetTop-j.scrollTop+j.clientTop;j=j.offsetParent}return{x:f,y:O,rect:R}}();c.visible=!1;const a=f=>{if(!(f instanceof Element))return document.body;const O=getComputedStyle(f);return!(f.scrollHeight>=f.clientHeight||f.scrollWidth>=f.clientWidth)||/^(visible|hidden)/.test(O.overflowY||"visible")&&/^(visible|hidden)/.test(O.overflowX||"visible")?a(f.parentElement)||document.body:f},d=a(e.parentNode);if(null!=d){let f=d.getBoundingClientRect();d===document.body&&(f={x:f.x,y:f.y,width:document.documentElement.offsetWidth||document.documentElement.clientWidth,height:document.documentElement.offsetHeight||document.documentElement.clientHeight,top:0,left:0,right:document.documentElement.clientWidth||document.documentElement.offsetWidth,bottom:document.documentElement.clientHeight||document.documentElement.offsetHeight}),null==n&&(n=0);const O=e.getBoundingClientRect();let R="none"!==getComputedStyle(e).display;if(R){R=!(O.left-1>f.right-n||O.right+1<f.left+n||O.top-1>f.bottom-n||O.bottom+1<f.top+n),d!==document.body&&(R=R&&C(d).position().visible);let H=e.parentNode;for(;H&&H instanceof Element&&R;){const k=getComputedStyle(H);R=R&&"none"!==k.display&&"hidden"!==k.visibility,H=H.parentNode}}c.visible=R,c.frame={dx:(O.left+O.width/2-f.left)/f.width,dy:(O.top+O.height/2-f.top)/f.height};const j=C(e);!R&&j.hasClass(s)?(j.removeClass(s),c.event="exit"):R?R&&(j.hasClass(s)?c.event="scroll":(c.event="enter",j.addClass(s))):c.event="off-scroll"}return c},b.addTransition=function(e,n,s,c,a,d){let f="",O=document.getElementById(e);null!=O?f=O.innerHTML:O=document.createElement("style");let R="",j="";C.each(c,(k,M)=>{k=m.camelCaseToHyphens(k),R+="  "+k+": "+M+";\n",j+=k+", "});let H="\n";return C.each(a,(k,M)=>{k=m.camelCaseToHyphens(k),H+="  transition-"+k+": "+M+";\n"}),j=j.substring(0,j.length-2)+";",f+=n+"."+s+", "+n+" ."+s+"{\n"+R+"  transition-property: "+j+H+"}\n",this.appendCss(f,O,e,d)},b.playFx=function(e){const n=this,s=C(e.target);if(0===s.length())return void h.warn("playFx: target element is undefined",e);null==e.classes?e.classes=[]:"string"==typeof e.classes&&(e.classes=e.classes.split(/[\s|,]+/g));const c=e.classes.length>1&&e.classes.shift();s.hasClass("--z-playing")||(s.addClass("--z-playing"),c&&s.addClass(c).css(e.type,"none"));const a=getComputedStyle(s.get()),d=1e3*parseFloat(a[e.type+"-delay"])||c?10:0;let f=!1;const O=()=>{f||(f=!0,e.classes.length>1?(e.onStep&&e.onStep.call(s,s,e.classes.slice(1)),n.playFx(e)):(!e.holdState&&e.classes.length>0&&s.removeClass(e.classes.shift()),s.removeClass("--z-playing"),e.onEnd&&e.onEnd.call(s,s)))},R=()=>{c&&s.css(e.type,"").removeClass(c);const H=e.classes[0];H&&s.addClass(H),e.options&&C.each(e.options,function(he,de){s.css(e.type+"-"+he,de)});const k=1+(parseFloat(a[e.type+"-iteration-count"])||0),M=1e3*parseFloat(a[e.type+"-duration"])*k;setTimeout(O,M)};s.on(e.type+"end",function(H){H.target===e.target.get()&&(s.off(e.type+"end",this),O())}),d>0?setTimeout(R,d):R()},b.ZxQuery=y,String.prototype.hashCode=function(){let e=0;if(0===this.length)return e;for(let n=0;n<this.length;n++)e=(e<<5)-e+this.charCodeAt(n),e|=0;return e},F.exports=b},693:function(F,W,p){"use strict";F.exports=p(459)()},265:function(F,W,p){"use strict";const h=p(349);function m(){this.observableList=[]}function u(w){let _="";for(;w&&w.__path__;){const z=w;_=(w=w.__parents__[0])&&w.__path__?"['"+z.__path__+"']."+_:z.__path__+(_.startsWith("[")?"":".")+_}return _}function r(w){const _=[];return w.__parents__.forEach(z=>_.push(...r(z))),_.push(...w.__listeners__),_}function l(w){r(w).forEach(_=>w.unsubscribe(_))}m.prototype.observable=function(w){let _;const z=this.observableList.filter(N=>w===N.proxy||w===N.target);return 1===z.length&&(_=z[0]),null==_&&(_=new h(this,w,{context:null,get:function(S,y){if("toJSON"===y)return()=>S;if("observableTarget"===y)return S;if("Symbol(Symbol.toStringTag)"===y.toString())return;let b;try{b=S[y]}catch{}if(typeof b>"u")return;const C=[],e=this.context.observable(S);if("object"==typeof b){const s=this.context.observable(b);-1===s.__parents__.indexOf(e)&&(s.__parents__.push(e),s.__path__=y),C.push(...r(s)),b=s.proxy}else C.push(...r(e));const n=u(e)+y;return C.forEach(s=>{s.get&&s.get(S,y,b,n)}),b},set:function(S,y,b){const C=JSON.parse(JSON.stringify(S)),e=S[y];"object"==typeof e&&l(this.context.observable(e)),S[y]=b;const n=this.context.observable(S),s=u(n)+y;return r(n).forEach(c=>{c.set&&c.set(S,y,b,s,C),C[s]!==b&&c.change&&c.change(S,y,b,s,C)}),!0},deleteProperty:function(S,y){const b=S[y];return"object"==typeof b&&l(this.context.observable(b)),delete S[y]}})),_},F.exports=m},349:function(F){"use strict";function W(p,h,m){Object.assign(m,{context:p}),Object.assign(this,Proxy.revocable(h,m)),this.handler=m,this.handler.context.observableList=this.handler.context.observableList||[],this.handler.context.observableList.push(this),this.target=h,this.__parents__=[],this.__listeners__=[]}W.prototype.subscribe=function(p){return this.handler.context.observableList.forEach(h=>{if(h!==this&&-1!==h.__listeners__.indexOf(p))throw new Error("Listener already registered.")}),this.__listeners__.push(p),this},W.prototype.unsubscribe=function(p){const h=this.__listeners__.indexOf(p);return-1!==h&&this.__listeners__.splice(h,1),0===this.__listeners__.length&&(this.revoke(),this.handler.context.observableList=this.handler.context.observableList.filter(m=>{if(m===this)return!1;const u=m.__parents__.indexOf(this);return-1===u||(m.__parents__.splice(u,1),0!==m.__parents__.length||0!==m.__listeners__.length)||(m.unsubscribe(null),!1)})),this},F.exports=W},398:function(F){"use strict";function p(h,m,u,r){this.$view=h,this.$element=m,this.contextData=u,this.refreshMs=100,this.paused=!1,this.forceActive=!1;let l=!1;this.requestRefresh=(w,_,z)=>{const S=w.get()===_.get()&&null!=zuix.context(w)&&!l||_.position().visible,y=this.forceActive||!this.paused&&null!=_.parent()&&S,b=(C,e,n)=>{null!=C&&(this.contextData=C),null==e&&(e=_.attr("@delay")?+_.attr("@delay"):null),null!=e&&(this.refreshMs=e),null==n&&(n=null!=_.attr("@active")),null!=n&&(this.forceActive=n);const s=zuix.context(w);null!=s&&null==s._error&&this.refreshMs>0?(setTimeout(()=>this.requestRefresh(w,_,this.contextData),y?this.refreshMs:500),l=!0):(null==s||null!=s._error)&&this.stop()};y?(_._refreshActive||(_._refreshActive=!0,_.trigger("refresh:active")),r(w,_,z,(C,e,n)=>b(C,e,n))):(_._refreshActive&&(_._refreshActive=!1,_.trigger("refresh:inactive")),b(this.contextData))}}p.prototype.stop=function(){this.pause(),this.refreshMs=0,this.stopped=!0},p.prototype.start=function(h){if(this.refreshMs=h||this.refreshMs,this.started)return this.resume();this.started=!0,this.requestRefresh(this.$view,this.$element,this.contextData)},p.prototype.pause=function(){this.paused=!0},p.prototype.resume=function(){this.paused=!1},F.exports=p},854:function(F){F.exports=()=>{}},622:function(F,W,p){"use strict";const h=p(381),m=h("ComponentContext.js"),u=p(541),r=p(917),l=p(826),w=p(643);let _=null;const z=[],N=[],y=(e,n)=>{const s=l.isNoU((n=n.observableTarget||n).value)?l.isNoU(n.innerHTML)?n:n.innerHTML:n.value;switch(e.tagName.toLowerCase()){case"img":e.src=l.isNoU(n.src)?l.isNoU(n.innerHTML)?n:n.innerHTML:n.src;break;case"a":e.href=l.isNoU(n.href)?l.isNoU(n.innerHTML)?n:n.innerHTML:n.getAttribute("href"),!l.isNoU(n.href)&&!l.isNoU(n.innerHTML)&&""!==n.innerHTML.trim()&&0===r(n).find(l.dom.queryAttribute(u.zField)).length()&&r(e).html("").append(document.createTextNode(n.innerHTML));break;case"input":switch(e.type){case"checkbox":case"radio":e.value==s&&(e.checked=!0);break;default:e.value=s}break;case"select":r.each(e.options,(a,d)=>{if(d.value==s)return e.selectedIndex=a,!1});break;default:const c=l.isNoU(n.innerHTML)?document.createTextNode(n):n.innerHTML;r(e).html("").append(c)}},b=(e,n,s,c,a)=>{c&&!e._disposed&&c.call(n,s,a,n,function(d){if(!e._disposed){const f=s.get().__zuix_refreshTimeout;f&&N[f]&&clearTimeout(N[f]),s.get().__zuix_refreshTimeout=setTimeout(function(){b(e,n,s,c,a)},d||500)}})};function C(e,n,s){return _=e,this.contextId=null==n||null==n.contextId?null:n.contextId,this.componentId=null,Object.defineProperty(this,"handlers",{enumerable:!1,writable:!0,value:{refresh:function(c,a,d,f){}}}),Object.defineProperty(this,"trigger",{enumerable:!1,writable:!0,value:(c,a,d)=>{s&&s(c,a,d)}}),Object.defineProperty(this,"_options",{enumerable:!1,writable:!0,value:null}),Object.defineProperty(this,"_container",{enumerable:!1,writable:!0,value:null}),Object.defineProperty(this,"_model",{enumerable:!1,writable:!0,value:null}),Object.defineProperty(this,"_view",{enumerable:!1,writable:!0,value:null}),Object.defineProperty(this,"_css",{enumerable:!1,writable:!0,value:null}),Object.defineProperty(this,"_style",{enumerable:!1,writable:!0,value:null}),Object.defineProperty(this,"_controller",{enumerable:!1,writable:!0,value:null}),Object.defineProperty(this,"behavior",{enumerable:!1,writable:!0,value:null}),Object.defineProperty(this,"_eventMap",{enumerable:!1,writable:!0,value:[]}),Object.defineProperty(this,"_behaviorMap",{enumerable:!1,writable:!0,value:[]}),Object.defineProperty(this,"_fieldCache",{enumerable:!1,writable:!0,value:[]}),Object.defineProperty(this,"_c",{enumerable:!1,writable:!0,value:null}),Object.defineProperty(this,"_modelListener",{enumerable:!1,writable:!0}),this._modelListener=Object.assign({context:null,get:function(c,a,d,f){},set:function(c,a,d,f,O){const R=this.context.$;if(c instanceof Element&&(f=f.split(".")[0],d=c),"function"==typeof d){let H=R.find(l.dom.queryAttribute(u.zBind,f));return null==H.get()&&(H=R.find(l.dom.queryAttribute(u.zField,f))),void b(this.context,R,H,d,a)}const j=H=>{null!=H.get()&&H.each((k,M)=>y(M,d))};if(R.get()){j(R.find(l.dom.queryAttribute(u.zBind,f))),j(R.find(l.dom.queryAttribute(u.zField,f)));const H=this.context._c;H&&H.update&&l.catchContextError(this.context,()=>{H.update(c,a,d,f,O)})}}},{context:this}),Object.defineProperty(this,"_viewObserver",{enumerable:!1,writable:!0,value:new w(this)}),Object.defineProperty(this,"_disposed",{enumerable:!1,writable:!0,value:!1}),Object.defineProperty(this,"#",{enumerable:!1,writable:!0,value:{}}),Object.defineProperty(this,"_",{enumerable:!1,writable:!0,value:{}}),Object.defineProperty(this,"_refreshHandler",{enumerable:!1,writable:!0}),Object.defineProperty(this,"_dependencyResolver",{enumerable:!1,writable:!0}),this.options(n),this}C.prototype.dispose=function(){if(this._disposed)return;this._disposed=!0,this._viewObserver.stop(),l.dom.getShadowRoot(this._container||this._view)&&this.style(null),this.model(null),this._c&&(this._c.view()&&(this._c.trigger("component:dispose",this._c.view(),!0),this._c.view().attr(u.zComponent,null).attr(u.zContext,null).attr(u.zLoad,null).attr(u.zLoaded,null).attr(u.zReady,null).attr(u.resourceType.view,null).attr(u.resourceType.controller,null).attr(u.resourceType.file,null).attr(this.getCssId(),null),this._c.view().reset(),this._c._fieldCache&&r.each(this._c._fieldCache,function(c,a){a.reset()})),this._c.dispose&&l.catchContextError(this,()=>{this._c.dispose.call(this,this)})),this._c&&this._c._childNodes.length>0&&(this._c.view().html(""),this._c.restoreView());const n=_.dumpContexts(),s=n.indexOf(this);-1!==s&&n.splice(s,1)},C.prototype.container=function(e){return null==e?this._container:(e instanceof r.ZxQuery&&(e=e.get()),this._container=e,this)},C.prototype.view=function(e){if(typeof e>"u")return this._view;if(null===e)throw new Error("View cannot be set to null.");if(e instanceof r.ZxQuery&&(e=e.get()),e===this._view)return this;this._viewObserver.stop();const n=this.getCssId();if(null!=this._view){const a="*"+l.dom.cssNot(u.zLoad).getAll();r(this._view).attr(n,null).find(a).each(function(d,f){this.attr(n,null)})}const s=a=>{a.find("*").each((d,f,O)=>{for(let R=0;R<f.attributes.length;R++){const j=f.attributes.item(R),H=j.value;if(j.name.length>1&&j.name.startsWith("#")){const k=l.hyphensToCamelCase(j.name.substring(1));null==O.attr(u.zField)&&O.attr(u.zField,k),null==O.attr(u.zBind)&&null!=H&&H.length>0&&O.attr(u.zBind,H)}}})};if(m.t(this.componentId,"view:attach","timer:view:start"),"string"==typeof e){const a={content:e};this.trigger(this,"html:parse",a);const d=r.wrapElement("div",e=a.content);null!=d.firstElementChild&&(null!=l.dom.getAttribute(d.firstElementChild,u.zView)?1===d.children.length&&(e=d.firstElementChild.innerHTML):e=d.innerHTML),null!=this._container?(this._view=this._container,this._view.innerHTML+=e):null!=this._view?this._view.innerHTML=e:this._view=d;const f=r(this._view);f.find("script:not([type=jscript])").each((O,R,j)=>{if("true"!==j.attr(u.zuixLoaded)){j.attr(u.zuixLoaded,"true");const H=R.innerHTML;l.catchContextError(this,()=>{Function(H).call(window)},k=>{console.error(k),console.log(H)})}}),s(f),this.trigger(this,"view:process",f)}else null!=this._container&&"default"!==this.componentId?(this._view=r.wrapElement("div",e.outerHTML).firstElementChild,l.dom.setAttribute(this._view,u.zView,null),this._container.appendChild(this._view),this._view=this._container):this._view=e;const c=r(this._view);return s(c),c.find(l.dom.queryAttribute(u.zLoad,null,l.dom.cssNot(u.zLoaded))).each((a,d,f)=>f.attr(u.zLoaded,"false")),this.checkEncapsulation(),this.modelToView(),m.t(this.componentId,"view:attach","timer:view:stop"),this},C.prototype.field=function(e){const n=_.field(e,this._view,this);return n.on=(s,c,a,d)=>{if("string"==typeof c){const f=c;c=()=>{this._c&&this._c.trigger(f,a,d)}}return r.ZxQuery.prototype.on.call(n,s,c)},n},C.prototype.checkEncapsulation=function(){const e=r(this._view),n=this.getCssId();if(e.length()&&!1!==this._options.css)if(e.attr(n,""),null!=this._container||null!=this._style){const s="*"+l.dom.cssNot(u.zLoad).getAll();e.find(s).each((c,a,d)=>d.attr(n,"")),this._viewObserver.start(),e.attr(u.resourceType.controller,null)}else e.attr(u.resourceType.controller,"")},C.prototype.style=function(e){if(typeof e>"u")return this._style;const n=this.getCssId();m.t(this.componentId,"view:style","timer:view:start",n);const s=l.dom.getShadowRoot(this._container||this._view);if(null==e||e instanceof Element)this._css=e instanceof Element?e.innerText:e,this._style=r.appendCss(e,this._style,this.componentId+"@"+n,s);else if("string"==typeof e){this._css=e;const c={content:e};this.trigger(this,"css:parse",c),e=c.content;let a="";!0===this.options().resetCss&&(a=":host { all: initial; }");const d="["+n+"]";(!s||"default"===this.componentId)&&(e=r.wrapCss(d,a+"\n"+e,!0===this.options().encapsulation)),this._style=r.appendCss(e,this._style,this.componentId+"@"+n,s)}return s||this.checkEncapsulation(),m.t(this.componentId,"view:style","timer:view:stop",n),this},C.prototype.model=function(e){return typeof e>"u"||this._model===e||(null!==this._model&&"function"!=typeof this._model&&_.observable(this._model).unsubscribe(this._modelListener),this._model=e,null!=e&&("function"!=typeof e&&(this._model=_.observable(e).subscribe(this._modelListener).proxy),this.modelToView(),null!=this._c&&this._c.update&&l.catchContextError(this,()=>{this._c.update.call(this._c,null,null,null,null,this._c)}))),this._model},C.prototype.controller=function(e){return typeof e>"u"?this._controller:(this._controller="string"==typeof e?_.controller(e,{componentId:this.componentId}):e,this._controller.log=h(this.componentId),this)},C.prototype.options=function(e){if(null==e)return this._options;const n=this._options=this._options||{};return Object.assign(n,e),this.componentId=n.componentId||this.componentId,null==z[this.componentId]&&(z[this.componentId]=z.length,z.length++),this.container(n.container),this.view(n.view),"string"==typeof n.css&&this.style(n.css),this.controller(n.controller),this.model(n.model),this},C.prototype.on=function(e,n){return this._c.on(e,n),this},C.prototype.loadCss=function(e){const n=this;e||(e={});let s=n.componentId;e.path&&(s=e.path);let c=_.store("zuix.inlineStyles");if(null==c&&(c=[],_.store("zuix.inlineStyles",c)),null!=c[s])n.style(c[s]),e.success&&e.success.call(n,c[s],n),e.then&&e.then.call(n,n);else{const a=r().find('style[media="#'+s+'"],style[media="'+s+'"]');if(a.length()){const f=a.get(0).innerText;n.style(f),a.detach(),c[s]=f,e.success&&e.success.call(n,f,n),e.then&&e.then.call(n,n)}else{s==n.componentId&&(s+=".css");const d=_.store("settings")?_.store("settings").fetchOptions:void 0;fetch(_.getResourcePath(s),d).then(f=>f.text()).then(f=>{n.style(f),e.success&&e.success.call(n,f,n)}).catch(f=>{m.e(f,n),e.error&&e.error.call(n,f,n)}).finally(()=>{e.then&&e.then.call(n,n)})}}return this},C.prototype.loadHtml=function(e){const n=this;let s=n.componentId;e||(e={}),e.path&&(s=e.path);let c=_.store("zuix.inlineViews");if(null==c&&(c=[],_.store("zuix.inlineViews",c)),null!=c[s])n.view(c[s]),e.success&&e.success.call(n,c[s],n),e.then&&e.then.call(n,n);else{const a=r().find(l.dom.queryAttribute(u.zView,s,l.dom.cssNot(u.zComponent)));if(a.length()){let d,f=a.get(0);if("template"===f.tagName.toLowerCase()?(f=f.cloneNode(!0),d=f.content.querySelectorAll("style")):d=f.querySelectorAll('style[media="#"]'),d)for(const O of d)O.setAttribute("media","#"+n.componentId);c[s]=f.innerHTML,n.view()===f||null!=n.container()&&n.container().contains(f)?(a.attr(u.zView,null),n._view=f,this.trigger(this,"view:process",r(n.view()))):n.view(f.innerHTML),e.success&&e.success.call(n,f.innerHTML,n),e.then&&e.then.call(n,n)}else{const d=e.cext?e.cext:".html";s==n.componentId&&(s+=d);const f=_.store("settings")?_.store("settings").fetchOptions:void 0;fetch(_.getResourcePath(s),f).then(O=>O.text()).then(O=>{n.view(O),e.success&&e.success.call(n,O,n)}).catch(O=>{m.e(O,n),e.error&&e.error.call(n,O,n)}).finally(()=>{e.then&&e.then.call(n,n)})}}return this},C.prototype.viewToModel=function(){m.t(this.componentId,"view:model","timer:vm:start");const e={},n=r(this._view);return n.find(l.dom.queryAttribute(u.zField)).each((s,c,a)=>{if(!_.isDirectComponentElement(n,a))return!0;const d=a.attr(u.zField);e[d]=c}),this._model=_.observable(e).subscribe(this._modelListener).proxy,m.t(this.componentId,"view:model","timer:vm:stop"),this},C.prototype.modelToView=function(){if(m.t(this.componentId,"model:view","timer:mv:start"),null!=this._view){this["#"]={};const e=r(this._view);e.find(l.dom.queryAttribute(u.zField)).each((n,s,c)=>{if(!_.isDirectComponentElement(e,c)&&"true"!==c.attr("inherits"))return!0;let a=c.attr(u.zBind);if(null==a&&(a=c.attr(u.zField)),"function"==typeof this._model)b(this,e,c,this._model,a);else{let d=l.propertyFromPath(this._model,a);const f=l.hyphensToCamelCase(a),O=l.propertyFromPath(this._model,f);null==d&&null!=O&&(a=f,d=l.propertyFromPath(this._model,d)),"function"==typeof d?b(this,e,c,d,a):null!=d&&y(s,d)}}),e.find(l.dom.queryAttribute(u.zField)).each((n,s,c)=>{if(!_.isDirectComponentElement(e,c)&&"true"!==c.attr("inherits"))return!0;let a=c.attr(u.zBind);null==a&&(a=c.attr(u.zField));try{const d=l.hyphensToCamelCase(a);Function("function testName(){ const "+d+' = "test"; }'),this["#"][d]=this.field(a)}catch{}})}return m.t(this.componentId,"model:view","timer:mv:stop"),this},C.prototype.getCssId=function(){let e="";return("default"===this.componentId||"string"==typeof this._options.css&&!1===l.dom.getShadowRoot(this._container||this._view))&&(e="_"+this.contextId),u.cssIdPrefix+(e=>z[this.componentId])()+e},Object.defineProperty(C.prototype,"path",{get:function(){const n=this.componentId,s=n.lastIndexOf("/");return s<0?n:n.substring(0,s+1)}}),Object.defineProperty(C.prototype,"name",{get:function(){const n=this.componentId,s=n.lastIndexOf("/");return s<0?n:n.substring(s+1)}}),Object.defineProperty(C.prototype,"$",{get:function(){return this._c&&this._c.view()}}),F.exports=C},211:function(F,W,p){"use strict";const h=p(541);c.prototype.componentize=function(x){return s?(l().one("componentize:step",()=>requestAnimationFrame(()=>{s=!1,n.componentize(x)})),this):(s=!0,n.trigger(this,"componentize:begin"),n.$().trigger("componentize:begin"),n.resolveImplicitLoad(x),function d(x){null==x&&(x=document),w.indexOf(x)||w.push(x)}(x),R(x),this)},c.prototype.applyOptions=function(x,L){return M(x,L),this},c.prototype.loadInline=function(x,L){return j(x,L),this},c.prototype.resolvePath=function(x){return H(x)},c.prototype.willLoadMore=function(){return _.length>0||w.length>0},c.prototype.lazyLoad=function(x,L){return a(x,L)},c.prototype.dequeue=function(x){for(let L=0;L<_.length;L++)if(_[L].element===x){_.splice(L,1);break}return this},c.prototype.setHost=function(x){return n=x,this},F.exports=function(){return new c};const u=p(381)("ComponentContext.js"),r=p(826),l=p(917),w=[],_=[],z={},N=[],S=[],y=function(){return{element:null,priority:0,visible:!0,lazy:!1}};let C=!1,e=1,n=null,s=!1;function c(){}function a(x,L){return null!=x&&(C=!x),null!=L&&(e=L),!C}function R(x){!function f(x){null==x&&w.length>0&&(x=w.unshift()),x instanceof l.ZxQuery&&(x=x.get());const L=r.dom.queryAttribute(h.zLoad,null,r.dom.cssNot(h.zLoaded));let T=l(x).find(L);T=Array.prototype.slice.call(T._selection);const I=[];for(let J=0;J<T.length;J++){const K=T[J];let D=+r.dom.getAttribute(K,h.zPriority);isNaN(D)&&(D=0);let ee=0,ne=K.parentNode,re=!1;for(;null!=ne&&ne!==document&&!(ne instanceof ShadowRoot);){if(ee++,null!=r.dom.getAttribute(ne,h.zView)){re=!0;break}ne=ne.parentNode}if(!re){const oe=new y;oe.element=K,oe.priority=D+1e3*ee,I.push(oe)}}let $=0;for(let J=0;J<I.length;J++){let K=!1;for(let D=0;D<_.length;D++)if(I[J].element===_[D].element){K=!0;break}if(!K){const D=I[J].element;M(D,r.dom.getAttribute(D,h.zOptions)),_.push(I[J]),$++}}(z.queued!==_.length||z.added!==$)&&(u.t("componentize:count",_.length,$),z.queued=_.length,z.added=$),0===$||0===w.length&&0===_.length?(n.trigger(this,"componentize:end"),n.$().trigger("componentize:end")):n.$().trigger("componentize:step"),s=!1}(x);const L=function O(){_.sort(function(T,I){return T.priority-I.priority});let x=null,L=_.length>0?_.shift():null;for(;null!=L&&null!=L.element;){const T=L.element,I=ye(T);if(a()&&I?(L.lazy=!0,L.visible=l.getPosition(T,e).visible):(L.lazy=!1,L.visible=!0),null!=T&&L.visible){x={item:L,cancelable:L.lazy};break}if(!(_.length>0))break;L=_.shift()}return x}();null!=L&&null!=L.item&&null!=L.item.element&&j(L.item.element)}function j(x,L){const T=l(x);if(!0===T.attr(h.zLoaded)||!1===T.attr(h.zLoaded)||T.parent("pre,code").length())return!1;T.attr(h.zLoaded,"true");let I=T.attr(h.zOptions);I?(I=k(x,I),I=r.cloneObject(I)||{}):I=null!=T.get().__zuix_loadOptions?T.get().__zuix_loadOptions:{},L&&Object.assign(I,L);const $=T.attr(h.zContext);if($){const t=n.context($);null!==t&&(I=t.options()),I.contextId=$}I.view||T.isEmpty()?!I.view&&!I.container&&T.isEmpty()&&null==T.attr(h.resourceType.controller)&&(I.container=x):(I.view=x,I.viewDeferred=!0);let K=T.attr(h.zLoad);if(!K)return!1;if(K=H(K),T.attr(h.zLoad,K),"default"!==K&&null!==T.attr(h.resourceType.view))T.attr(h.zComponent,null),I.controller||(I.controller=function(){});else if("default"===K||null!==T.attr(h.resourceType.controller)){I.view=I.view||x,I.viewDeferred=!0,I.html=I.html||!1,I.css=I.css||!1;const t=T.children('[media="#"]');t.length()&&t.parent().get()===T.get()&&(!1===I.css&&(I.css=""),t.each((i,o,g)=>I.css+="\n"+I.css+g.html()),t.detach()),"default"===K&&(I.controller=I.controller||function(){})}Array.from(T.get().attributes).filter(t=>t.nodeName.startsWith(":")).forEach(t=>{const o=t.nodeName.match(/[^:]+/g);let g=I;o&&o.forEach((v,A)=>{if(v=r.hyphensToCamelCase(v),A===o.length-1){let E,P=null;P=T.parent().get()instanceof ShadowRoot?I.__shadowRoot.parent(`[${h.zReady}="true"]`):T.parent(`[${h.zReady}="true"]`),P=n.context(P);try{if(P){let q=t.nodeValue;if(!q)return;const G=t.nodeName,V=G.lastIndexOf(":")<2;q.match(/^[^<>()\[\]\-+\s!?/&\xa3"=^#@:;,.*|]+$/g)||(q=`(event, args) => { ${t.nodeValue} }`),(G.startsWith(":model")||V)&&(q=`(${t.nodeValue})`);try{E=n.runScriptlet(q,T,P.$,null)}catch(B){u.warn(G,t.nodeValue,B)}if(null==E)return;if(":ready"===G)return void(g.ready=E);if(":error"===G)return void(g.error=E);if(G.startsWith(":on")||G.startsWith(":behavior")){if(V)return void(g.on=E);const B=G.substring(G.indexOf(":",1)+1);((G.startsWith(":behavior")?g.behavior:g.on)||{})[B]=E}else if(G.startsWith(":model")){if(V)return void(g.model=E);const B=G.match(/[^:]+/g).splice(1);let U=g.model||{};B.forEach((Q,Z)=>{if(Q=r.hyphensToCamelCase(Q),Z===B.length-1)return U[Q]=E;U=U[Q]=U[Q]||{}})}}else E=Function("return "+t.nodeValue+";")()}catch(q){u.warn(o.join(":"),v,t.nodeValue,q)}return g[v]=E}g=g[v]=g[v]||{}})});const ee=T.attr(h.zOn);ee&&(I.on=k(x,ee));const ne=T.attr(h.zCss);ne&&(I.css=k(x,ne));const re=T.attr(h.zBehavior);re&&(I.behavior=k(x,re));const oe=T.attr(h.zModel);oe&&(I.model=k(x,oe));const me=T.attr(h.zUsing);me&&(I.using=me);const pe=T.attr(h.zPriority);return pe&&(I.priority=+pe),n.load(K,I),!0}function H(x){if("@"===x[0]){let L=n.store("config"),T="https://zuixjs.github.io/zkit/lib/1.2/";if(null!=L&&null!=L[location.host]&&(L=L[location.host]),null!=L)switch(typeof L.libraryPath){case"object":l.each(L.libraryPath,(I,$)=>!x.startsWith(I+"/")||(T=$,!1));break;case"string":T=L.libraryPath}x=T+x.substring(x.indexOf("/")+1)}return x}function k(x,L){if("string"==typeof L){const T=l(x).parent(r.dom.queryAttribute(h.zLoad));if(T.get()){const I=n.context(T);try{return I._refreshHandler.runScriptlet(x,`[${L}][0]`)}catch{}}L=L.trim().startsWith("{")&&L.trim().endsWith("}")?Function("return "+L)():r.propertyFromPath(window,L)}return L}function M(x,L){L=k(x,L),x&&L&&(L.componentId&&r.dom.setAttribute(x,h.zLoad,L.componentId.toString().toLowerCase()),L.contextId&&r.dom.setAttribute(x,h.zContext,L.contextId.toString().toLowerCase()),L.lazyLoad&&r.dom.setAttribute(x,h.zLazy,L.lazyLoad.toString().toLowerCase()))}function de(x){const L={element:x};return N.push(L),L}function ye(x){const L=l(x),T=L.parent(`[${h.zLazy}]`);if("false"===L.attr(h.zLazy)||T.length()&&"false"===T.attr(h.zLazy))return!1;if(function he(x){for(let L=0;L<N.length;L++){const T=N[L];if(T.element===x)return T}return null}(x))return!0;{const I=r.dom.queryAttribute(h.zLazy,"scroll")+","+r.dom.queryAttribute(h.zLazy,"true"),$=L.parent(),J=$.length()?$.parent(I).get():null;if(J){de(x);let K=function ge(x){for(let L=0;L<S.length;L++){const T=S[L];if(T.element===x)return T}return null}(J);return K||(K=function _e(x){const L={element:x};return S.push(L),L}(J),"scroll"===r.dom.getAttribute(J,h.zLazy)&&function(D,ee){let re,ne=(new Date).getTime();l(ee===document.body?window:ee).on("scroll",()=>{const oe=(new Date).getTime();oe-ne>150?(ne=oe,R(ee)):(clearTimeout(re),re=setTimeout(()=>R(ee),100))})}(0,J)),!0}if("true"===L.attr(h.zLazy))return de(x),!0}return!1}},561:function(F,W,p){"use strict";const h=p(917),m=p(826);function u(r){const l=this;Object.defineProperty(l,"context",{enumerable:!0,writable:!0,value:r}),Object.defineProperty(l,"_view",{enumerable:!1,writable:!0,value:null}),Object.defineProperty(l,"_childNodes",{enumerable:!1,writable:!0,value:[]}),Object.defineProperty(l,"saveView",{enumerable:!1,writable:!0,value:()=>{l.restoreView(),l.view().children().each((z,N)=>l._childNodes.push(N))}}),Object.defineProperty(l,"restoreView",{enumerable:!1,writable:!0,value:()=>{if(l._childNodes.length>0){let z=l.view();z.get().parentNode instanceof ShadowRoot&&(z=l.options().__shadowRoot),z&&(z.html(""),h.each(l._childNodes,(N,S)=>z.append(S))),l._childNodes.length=0}}}),Object.defineProperty(l,"on",{enumerable:!1,writable:!0}),l.on=(z,N)=>"object"==typeof z&&null==N?(h.each(z,(S,y)=>l.on(S,y)),l):(l.addEvent(z,N),l),Object.defineProperty(l,"mapEvent",{enumerable:!1,writable:!0}),l.mapEvent=(z,N,S,y)=>{null!=N&&(N.off(S,l.eventRouter),z.push({target:N,eventPath:S,handler:y}),N.on(S,l.eventRouter))},Object.defineProperty(l,"eventRouter",{enumerable:!1,writable:!0}),l.eventRouter=z=>{const N=l.view();r._behaviorMap.concat(r._eventMap).forEach(S=>{S.eventPath===z.type&&S.handler&&S.handler.call(N,z,z.detail,N)})};const w=r.options();let _=null;if(null!=w.on&&h.each(w.on,(z,N)=>z.split(/[\s|,]+/g).map(S=>l.addEvent(S,N))),null!=w.behavior)for(const z in w.behavior)w.behavior.hasOwnProperty(z)&&(_=w.behavior[z],z.split(/[\s|,]+/g).map(N=>l.addEvent(N,_)));try{if("function"==typeof(N=r.controller())&&/^\s*class\s+/.test(N.toString())){const N=new(r.controller().bind(l,l));r.controller(N)}else r.controller().call(l,l)}catch(z){console.log(z)}var N;return Object.assign(r.controller(),w.controllerMembers),l}u.prototype.using=function(r,l,w){return zuix.using(r,l,w,this.context),this},u.prototype.addEvent=function(r,l){return this.mapEvent(this.context._eventMap,this.view(),r,l),this},u.prototype.addBehavior=function(r,l){return this.mapEvent(this.context._behaviorMap,this.view(),r,l),this},u.prototype.addTransition=function(r,l,w){const _=this.context.getCssId();return this.context.$.attr(_,""),h.addTransition(this.context.componentId+"@"+_,"[z-component]["+_+"]",r,l,w,m.dom.getShadowRoot(this.context.container()||this.context.view())),this},u.prototype.field=function(r){return this.context.field(r)},u.prototype.clearCache=function(){this.context._fieldCache={}},u.prototype.view=function(r){const l=this;if((l.context.view()||l._view!==l.context.view())&&(l.clearCache(),l._view=h(l.context.view()),l._view.field=w=>l.context.field(w)),r)return l._view.find(r);if(l._view)return l._view;throw new Error("Not attached to a view yet.")},u.prototype.model=function(r){return r?(this.context.model(r),this):this.context.model()},u.prototype.options=function(){return this.context.options()},u.prototype.trigger=function(r,l,w){if(w){let _=this.context.container();_||(_=this.context.view()),_&&h(_).trigger(r,l),this.context.trigger(this.context,r,l)}else{const _=this.options().__shadowRoot;_&&_.trigger(r,l),this.view().trigger(r,l)}return this},u.prototype.expose=function(r,l){const w=(_,z)=>{z&&(z.get||z.set)?Object.defineProperty(this.context,_,z):void 0===z?delete this.context[_]:this.context[_]=z};return"object"==typeof r?h.each(r,(_,z)=>w(_,z)):w(r,l),this},u.prototype.declare=function(r,l){const w=(_,z)=>{z&&(z.get||z.set)?Object.defineProperty(this.context._,_,z):void 0===z?delete this.context._[_]:this.context._[_]=z};return"object"==typeof r?h.each(r,(_,z)=>w(_,z)):w(r,l),this},u.prototype.loadCss=function(r){return this.context.loadCss(r),this},u.prototype.loadHtml=function(r){return this.saveView(),this.context.loadHtml(r),this},u.prototype.log={},u.prototype.for=function(r){return this},F.exports=u},871:function(F){"use strict";function W(p){p.init=this.onInit.bind(this),p.create=this.onCreate.bind(this),p.dispose=this.onDispose.bind(this),p.update=(h,m,u,r,l)=>this.onUpdate.call(this,h,m,u,r,l),Object.assign(this,p),Object.assign(this,Object.getPrototypeOf(p))}W.prototype.onInit=function(){},W.prototype.onCreate=function(){},W.prototype.onDispose=function(){},W.prototype.onUpdate=function(p,h,m,u,r){},F.exports=W},541:function(F){const W=Object.freeze({zModel:"z-model",zBind:"z-bind",zBehavior:"z-behavior",zOn:"z-on",zCss:"z-css",zComponent:"z-component",zContext:"z-context",zField:"z-field",zLazy:"z-lazy",zLoad:"z-load",zLoaded:"z-loaded",zOptions:"z-options",zUsing:"z-using",zPriority:"z-priority",zView:"z-view",zuixLoaded:"zuix-loaded",zReady:"z-ready",resourceType:{view:"view",controller:"ctrl",file:"file"},cssIdPrefix:"z-css-"});F.exports=W},643:function(F,W,p){"use strict";const h=p(541),m=p(826);function u(r){const l=this._context=r;this._mutationObserver=null,this._mutationCallback=(w,_)=>{const z=m.dom.queryAttribute(h.zComponent),N=S=>{for(let y=0;y<S.attributes.length;y++)if(S.attributes[y].name.startsWith(h.cssIdPrefix))return!0};for(const S of w)"childList"===S.type&&S.addedNodes.forEach(y=>{if(y instanceof Element){let b=zuix.$(y).parent(z);if(null==b.get())return;if(!1!==l.options().css&&null==b.attr(h.resourceType.controller))(b.get()===l._container||b.get()===l._view)&&(N(y)||m.dom.setAttribute(y,l.getCssId(),""));else{let C=0;do{C++,b=b.parent(z)}while(C<10&&null!=b.get()&&null!=b.attr(h.resourceType.controller));b.get()&&(b=zuix.context(b),N(y)||(m.dom.setAttribute(y,b.getCssId(),""),zuix.$(y).find("*").each(function(){this.attr(b.getCssId(),"")})))}}})}}u.prototype.start=function(){this.stop(),this._mutationObserver=new MutationObserver(this._mutationCallback),this._mutationObserver.observe(this._context._view,{attributes:!1,childList:!0,subtree:!0})},u.prototype.stop=function(){null!=this._mutationObserver&&(this._mutationObserver.disconnect(),this._mutationObserver=null)},F.exports=u},459:function(F,W,p){"use strict";const h=p(381),m=h("Zuix.js"),u=p(826),r=p(917),l=p(65),w=p(265),_=p(622),z=p(561),N=p(871),S=p(398),y=p(211)(),b=p(541);p(854);const C=[],e=[],n={},s=[],c={},a=[],d=function(t){return s[t]||(s[t]=new l(function(i,o,g){J(i,o,g)})),s[t]};let f=[],O=0,R=!1;const j=new w,k=[u.dom.queryAttribute(b.zContext),u.dom.queryAttribute(b.zOptions),u.dom.queryAttribute(b.zModel+",:model"),u.dom.queryAttribute(b.zOn+",:on"),u.dom.queryAttribute(b.zCss+",:css"),u.dom.queryAttribute(b.zBehavior+",:behavior"),u.dom.queryAttribute(b.zUsing+",:using"),u.dom.queryAttribute(b.zReady)];function M(){const t=this;return y.setHost(t),this._store={settings:{fetchOptions:{}},config:{title:"zUIx.js app",baseUrl:"/",resourcePath:"/app/",libraryPath:{"@lib":"https://zuixjs.github.io/zkit/lib/1.2/","@hgui":"https://genielabs.github.io/homegenie-web-ui/app/","@cdnjs":"https://cdnjs.cloudflare.com/ajax/libs/"},"zuixjs.github.io":{resourcePath:"/zuixjs/app",libraryPath:{"@lib":"https://zuixjs.github.io/zkit/lib/1.2/","@hgui":"https://genielabs.github.io/homegenie-web-ui/app/","@cdnjs":"https://cdnjs.cloudflare.com/ajax/libs/"}}},handlers:{sync:function(i,o,g,v){const A=o.attr("@sync")||o.attr(b.zField);o.on("keyup change keydown",function(){const E=o.get();let P=o.value();("checkbox"===E.type||"radio"===E.type)&&!E.checked&&g[A]==P&&(P=""),g[A]!==P&&(g[A]=P)}),g[A]=o.value()},get:function(i,o,g,v){let A=o.attr("@get");const E=A.split(" as ");A=E[0];const P=E[1]||"result",q=t.runScriptlet(A,o,i);q!==g&&(A="const "+P+" = args; "+o.attr("@set"),t.runScriptlet(A,o,i,q),g=q),v(g)},set:function(i,o,g,v){o.attr("@get")||(t.runScriptlet(o.attr("@set"),o,i),v(g))},"disable-if":function(i,o,g,v){const A=o.attr("@disable-if"),E=t.runScriptlet(A,o,i);E!==g&&(o.attr({disabled:E?"":null}),g=E),v(g)},"hide-if":function(i,o,g,v){const A=o.attr("@hide-if"),E=t.runScriptlet(A,o,i);E!==g&&(o.css(E?{visibility:"hidden"}:{visibility:"visible"}),g=E),v(g)},if:function(i,o,g,v){const A=o.attr("@if"),E=t.runScriptlet(A,o,i);E!==g&&(t.runScriptlet(o.attr(E?"@then":"@else"),o,i),g=E),v(g)}}},this._fieldCache=[],this}function he(t){return"function"!=typeof t.for&&(t.for=function(i){return n[i]=t,t}),t}function de(t,i,o){o||(o=this),null==o._fieldCache&&(o._fieldCache={});let g=null;return typeof o._fieldCache[t]>"u"?(g=r(i).find(u.dom.queryAttribute(b.zField,t)+",["+CSS.escape("#"+t)+"]"),g.length()&&(o._fieldCache[t]=g,1===g.length()&&!g.field&&(g.field=v=>de(v,g,g)))):g=o._fieldCache[t],g}function ge(t,i){t=y.resolvePath(t);let o=null;return i?(i.componentId=t,i.contextId?(o=I(i.contextId),null!==o?o.options(i):o=T(i)):(!1===i&&(i={}),i.contextId="zuix-ctx-"+ ++O,o=T(i))):o=new _(zuix,i={},J),o.componentId!=t&&(o.componentId=t),i.ready&&(o.ready=i.ready),i.loaded&&(o.loaded=i.loaded),i.error&&(o.error=i.error),null==a[t]?(a[t]=!0,ye(o,i)):(null==c[t]&&(c[t]=[]),c[t].push({c:o,o:i}),o)}function ye(t,i){let o=D(t.componentId);null!==o&&null==i.controller&&null==t.controller()&&(t.controller(o.controller),m.t(t.componentId+":js","component:cached:js"));const g=function(v){!1!==i.css&&"string"!=typeof i.css?(v[t.componentId].step(t.componentId+":css"),t.loadCss({success:A=>o.css=A,error:A=>m.e(A,t),then:()=>ee(t,v[t.componentId])})):ee(t,v[t.componentId])};if(!i.view){if(i.html)t.view(i.html),m.t(t.componentId+":html","component:options:html");else if(null!==o&&(null!=o.view&&(t.view(o.view),m.t(t.componentId+":html","component:cached:html")),!1!==i.css&&"string"!=typeof i.css)){i.css=!1;const v=u.dom.getShadowRoot(t.container()||t.view());(!o.css_applied||v)&&(o.css_applied=!0,t.style(o.css),m.t(t.componentId+":css","component:cached:css"))}return"string"==typeof i.css&&(t.style(i.css),m.t(t.componentId+":css","component:options:css")),t.view()?d("resource-loader").queue(t.componentId+":css",function(){a[t.componentId]=this,g(a)},i.priority):d("resource-loader").queue(t.componentId+":html",function(){a[t.componentId]=this,t.loadHtml({cext:i.cext,success:v=>{null==o&&(o=ne(t)),o.view=v,delete o.controller,g(a)},error:v=>{m.e(v,t),i.error&&t.error.call(t,v,t)}})},i.priority),t}return t.view(i.view),null==t.controller()?d("resource-loader").queue(t.componentId+":js",function(){a[t.componentId]=this,ee(t,a[t.componentId])},C.length):ee(t),t}function x(t){const i=zuix.dumpContexts(),o=g=>{if(g instanceof Element){const v=g;g=zuix.context(v),y.dequeue(v)}if(g){const v=i.indexOf(g);-1!==v&&i.splice(v,1),g.$.find(`[${b.zLoaded}],[shadow]`).each((A,E)=>{u.catchContextError(g,()=>{x(E)})}),u.catchContextError(g,()=>{g.dispose()})}};t&&t.each?t.each((g,v)=>o(v)):o(t)}function T(t){const i=new _(zuix,t,J);return C.push(i),i}function I(t,i){let o=null;if(t instanceof r.ZxQuery&&(t=t.get()),t instanceof Element&&t.getAttribute("shadow")&&(t=t.getAttribute("shadow")),r.each(C,(g,v)=>{if(t===v.contextId||t instanceof Element&&(v.view()===t||v.container()===t))return o=v,!1}),i){const g=v=>setTimeout(()=>{i.call(v,v)},10);if(o&&o.isReady)g(o);else if("string"==typeof t){const v=r.find(u.dom.queryAttribute(b.zContext,t));v.length()&&I(v,A=>A?g(A):I(t,i))}else t instanceof Element&&zuix.$(t).one("component:ready",function(){o=C.find(v=>v.view()===t||v.container()===t),g(o)})}return o}function J(t,i,o){e[i]&&e[i].call(t,o,t)}function D(t){let i=null;return r.each(f,(o,g)=>{if(g.componentId===t)return i=g,!1}),i}function ee(t,i){if(typeof t.options().controller>"u"&&null===t.controller())if(m.d(t.componentId,"controller:load"),i&&i.step(t.componentId+":js"),n[t.componentId])t.controller(n[t.componentId]),re(t,i);else{const o=function(g){const v=t.componentId+".js",A=zuix.store("settings")?zuix.store("settings").fetchOptions:t.options().fetchOptions||void 0;fetch(zuix.getResourcePath(v),A).then(E=>E.text()).then(E=>{try{t.controller(E,{error:q=>{t.error&&t.error.call(t,q,t)},componentId:t.componentId});let P=D(t.componentId);null==P&&(P={componentId:t.componentId,controller:t.controller()},f.push(P))}catch(P){m.e(new Error,P,E,t),t.error&&t.error.call(t,P,t)}}).catch(E=>{m.e(E,new Error,t),t.error&&t.error.call(t,E,t)}).finally(()=>{re(t,g)})};i?o(i):d("resource-loader").queue(t.componentId+":js",function(){o(a[t.componentId]=this)},t.options().priority)}else re(t,i)}function ne(t){const i=t.view().innerHTML,o=r.wrapElement("div",i),g={componentId:t.componentId,view:o.innerHTML,css:t._css||t.options().css,controller:t.controller()};return f.push(g),m.t(t.componentId,"bundle:added"),g}function re(t,i){if(a[t.componentId]=null,t.view()){let o=D(t.componentId);t.options().viewDeferred?m.d(t.componentId,"component:deferred:load"):null===o?o=ne(t):null==o.controller&&(o.controller=t.controller());const g=r(t.view());if(null==g.attr(b.zContext)&&g.attr(b.zContext,t.contextId),m.d(t.componentId,"component:initializing"),t.controller()){const v=t._c=new z(t);v.log=h(t.contextId);const A=()=>{i&&m.d(t.componentId,"controller:create:deferred"),function me(t){const i=t.context;m.t(i.componentId,"controller:init","timer:init:start"),i.isReady=!0;const o=t.view();t.create&&u.catchContextError(i,()=>{t.create()}),t.trigger("view:create",o),(()=>{if(i.loaded&&u.catchContextError(i,()=>{i.loaded.call(i,i)}),null!=c[i.componentId]){const B=c[i.componentId];let U;for(c[i.componentId]=null;null!=B&&null!=(U=B.shift());)ye(U.c,U.o)}const V=u.dom.queryAttribute(b.zLoaded,"false",u.dom.cssNot(b.zComponent));o.find(V).each(function(B,U){this.attr(b.zLoaded,null)}),setTimeout(()=>zuix.componentize(o))})(),t.trigger("component:loaded",o,!0);const v=()=>{zuix.context(o)===i&&o.find("*").each((B,U,Q)=>{oe(o,Q)&&((B,U)=>{Array.from(U.get().attributes).forEach(Q=>{let Z=Q.nodeValue;const te=Q.nodeName;if(Z&&te.startsWith("(")&&te.endsWith(")")){Z.match(/^[^<>()\[\]\-+\s!?/&\xa3"=^#@:;,.*|]+$/g)||(Z=`(event, args) => { ${Q.nodeValue} }`);const X=te.substring(1,te.length-1),ie=zuix.runScriptlet(Z,U,o,null);U===o?B.on(X,ie):U.on(X,ie)}})})(i,Q)}),i.ready&&u.catchContextError(i,()=>{i.ready.call(i,i)}),t.trigger("component:ready",o,!0)},A=zuix.store("handlers"),P=i.contextId,q=o.find(':scope > [type="jscript"]');q._selection=q._selection.concat(r(document).find('[type="jscript"][for="'+P+'"]')._selection),i.handlers.refresh=(V,B,U,Q)=>{if(!i._disposed){if(i._dependencyResolver&&!i._dependencyResolver.resolved())return i.$.hasClass("not-ready")||i.$.addClass("not-ready"),Q(U);null!=i._dependencyResolver&&!1!==i._dependencyResolver&&(i.$.removeClass("not-ready"),i._dependencyResolver=!1);let Z=i._refreshHandler;if(!Z){const te="return (function($this, context, args){const $ = context.$; const model = context.model(); const trigger = (ep, ed) => context._c.trigger(ep, ed); ";let X='"use strict"; expose = {}; ';i["#"]&&r.each(i["#"],(ae,ce)=>{const Y=u.hyphensToCamelCase(ae);X+="const $"+Y+' = context["#"].'+Y+";",X+="const "+Y+" = $"+Y+".get();",X+="let _"+Y+" = null; zuix.context("+Y+", function(c) { _"+Y+" = c; });",X+="if ("+Y+") new MutationObserver((a,b) => { zuix.context("+Y+", function(c) { _"+Y+" = c; });}).observe("+Y+',{attributes:true,attributeFilter: ["shadow"]});'}),i._?(r.each(i._,(ae,ce)=>{X+="const "+ae+' = context["_"].'+ae+";"}),void 0===i._.refresh&&(X+="function refresh() {}; "),void 0===i._.ready&&(X+="function ready() { return true; }; ")):(X+="function refresh() {}; ",X+="function ready() { return true; }; "),X+="function runScriptlet($el, s, args) { let result; try { result = eval(\"const $this = $el; const _this = zuix.context(this); \" + s); } catch (e) { if (!$el._lastError || $el._lastError.toString() !== e.toString()) { context._error = e; console.error('SCRIPTLET ERROR', e, '\\n', context, this, '\\n', s); if (context.error) context.error(e); } $el._lastError = e; }; return result };";const ie=[];let le="";ie.push(P),q.each((ae,ce,Y)=>{zuix.context(V)===i&&(null!=Y.attr("using")&&ie.push(...Y.attr("using").split(/[;|,]+/g)),(Y.parent().get()===V.get()||Y.attr("for")===P)&&(le+=Y.html()+";",ce.remove()))}),null!=i.options().using&&ie.push(...i.options().using.split(/[;|,]+/g));let se="";if(ie.length>0){let ae="";if(ie.forEach(ce=>{const Y=ce.split(" as ");ce=Y[0];const fe=u.hyphensToCamelCase(Y[1])||u.hyphensToCamelCase(ce),ve="let "+fe+' = window["'+fe+'"]; if ('+fe+' == null) { const tc = zuix.context("'+ce+'"';se+=!1!==i._dependencyResolver?ve+", (ctx) => "+fe+" = ctx);":ve+");",se+="if (tc && tc.isReady) "+fe+" = tc; }",ae+=fe+" && "}),!1!==i._dependencyResolver&&se.length>0&&(se+="const resolved = function() { return "+ae+"true; };",i._dependencyResolver=Function(te+se+"; return { resolved }; }).call(this.$el.get(), this.$el, this.ctx, this.args);").call({$el:B,ctx:i,args:null}),!i._dependencyResolver.resolved()&&Q))return Q(U)}X+=se+le;const ue=X+"; return { refresh, runScriptlet, ready, expose }; }).call(this.$el.get(), this.$el, this.ctx, this.args);";u.catchContextError(i,()=>{Z=i._refreshHandler=Function(te+";"+ue).call({$el:B,ctx:i,args:null}),Z.expose&&Object.assign(i,Z.expose)})}!i._dependencyResolver&&Z.refresh&&i._refreshHandler.refresh(),Q&&Q(U)}};const G=[];if(o.find("*").each((V,B,U)=>{!oe(o,U)||zuix.context(o)!==i||G.push(...((V,B)=>{const U=B.get(),Q=[];for(let Z=0;Z<U.attributes.length;Z++){const X=U.attributes.item(Z).name;if(X.length>1&&X.startsWith("@")){const ie=X.substring(1).split(":")[0];let le=i.handlers?i.handlers[ie]:null;if(le||(le=A[ie]),le){const se=zuix.activeRefresh(V,B,t.model(),(ue,ae,ce,Y)=>{B.attr(b.zLoad)&&"true"!==B.attr(b.zReady)?null==zuix.context(B)&&Y(ce):le.call(U,V,B,ce,Y,X)});Q.push(se)}}}return Q})(o,U))}),G.length>0||q.length()){const V=q.length()?q.attr("refreshdelay"):null,B=q.length()?q.attr("handlersdelay"):null;i.handlers.refresh.call(o.get(),o,o,t.model(),(U,Q)=>{zuix.activeRefresh(o,o,U,(Z,te,X,ie)=>{if(i._refreshHandler&&!i._refreshHandler.initialized){let le=!0;G.forEach(ue=>{if(null!=ue.$element.attr(b.zLoad))return le=null!=zuix.context(ue.$element)&&zuix.context(ue.$element).isReady,le});let se=le&&!0===i.isReady;u.catchContextError(i,()=>{se=se&&i._refreshHandler.ready()},ue=>{se=!1}),se?(i._refreshHandler.initialized=!0,G.forEach(ue=>ue.start(B)),i.$.removeClass("not-ready"),v()):i.$.hasClass("not-ready")||i.$.addClass("not-ready"),ie(X,V,!0)}else null==i._error&&i.handlers.refresh.call(o.get(),o,o,X,ie)}).start(V)})}else null==i._error&&(i.handlers.refresh.call(o.get(),o,o),v());m.t(i.componentId,"controller:init","timer:init:stop"),m.i(i.componentId,"component:loaded",P)}(v),i&&i.end(),g.attr(b.zReady,"true")};if(v.init){let E=!1;if(u.catchContextError(t,()=>{v.init()},P=>{A(),E=!0}),E)return}if(v.view()&&null==v.view().attr(b.zComponent)&&v.view().attr(b.zComponent,""),null==t.model()&&t.view()&&t.viewToModel(),t.options().viewDeferred){t.options().viewDeferred=!1,v.saveView(),null===o&&"default"!==t.componentId&&(o={componentId:t.componentId,controller:t.controller()},f.push(o),m.t(t.componentId,"bundle:added"),m.d(t.componentId,"component:deferred:load"));const E=()=>{!1!==t.options().html?("string"==typeof t.options().html&&(o.view=t.options().html),null==o.view?t.loadHtml({cext:t.options().cext,success:P=>{o.view=P,m.d(t.componentId,"component:deferred:html")},error:P=>{m.e(P,t),t.options().error&&t.options().error.call(t,P,t)},then:()=>{m.d(t.componentId,"controller:create:2"),A()}}):(t.view(o.view),A())):(m.d(t.componentId,"controller:create:3"),A())};!1!==t.options().css&&"string"!=typeof t.options().css?null==o.css?t.loadCss({success:P=>{o.css=P,m.d(t.componentId,"component:deferred:css")},then:()=>E()}):(t.style(o.css),E()):("string"==typeof t.options().css&&t.style(t.options().css),E())}else m.d(t.componentId,"controller:create:1"),A()}else m.w(t.componentId,"component:controller:undefined")}else m.e(t.componentId,"component:view:undefined")}function oe(t,i){const o=[...k,u.dom.queryAttribute(b.zLoad)].join(",");return i.parent("pre,code,"+o).get()===t.get()}function pe(t,i){let o=g=>{};if("string"==typeof t)try{const g=Function(u.normalizeControllerCode(t))();if("function"!=typeof g)throw new Error('Unexpected controller type: "'+typeof g+'"');o=g}catch(g){i&&"function"==typeof i.error&&i.error(g),m.e(this,g,t)}return o}M.prototype.field=function(t,i,o){return de.call(this,t,i,o)},M.prototype.load=function(t,i){return ge.call(this,t,i)},M.prototype.unload=function(t){return x(t),this},M.prototype.loadComponent=function(t,i,o,g){return function L(t,i,o,g){x(t=r(t)),t.each((A,E,P)=>{!0!==P.attr(b.zLoaded)&&!1!==P.attr(b.zLoaded)&&function(A){if(A.attr(b.zLoad,i),o&&A.attr(o,""),g&&g.lazyLoad&&"true"===g.lazyLoad.toString()||"true"===A.attr(b.zLazy))return g&&(A.get().__zuix_loadOptions=g),!1;let E=A.get().shadowRoot;if(null==E&&g&&g.container instanceof ShadowRoot?(E=g.container,g.__shadowRoot=A,delete g.container):E&&g&&delete g.container,E){const P=document.createElement("div");Array.from(A.get().attributes).forEach(q=>{if(!q.nodeName.match(/^[(#@)]/))try{P.setAttribute(q.nodeName,q.nodeValue),q.nodeName!==b.zField&&A.attr(q.nodeName,null)}catch(G){console.error(G)}}),setTimeout(()=>{for(;A.get().firstChild;)P.appendChild(A.get().firstChild);try{E.appendChild(P)}catch(q){return void console.error(q)}y.loadInline(P,g),zuix.context(P,q=>{A.attr("shadow",q.contextId)})})}else y.loadInline(A,g)}(P)})}(t,i,o,g),this},M.prototype.controller=function(t,i){return"string"==typeof t&&(i&&i.componentId&&(t+='\n//# sourceURL="'+i.componentId+'.js"\n'),t=pe(t,i)),i&&i.componentId&&(n[i.componentId]=t),he.call(this,t)},M.prototype.context=function(t,i){return I.call(this,t,i)},M.prototype.trigger=function(t,i,o){return J(t,i,o),this},M.prototype.hook=function(t,i){return function $(t,i){i?(e[t]&&m.w("Hook override",'"'+t+'"',"OLD",e[t],"NEW",i),e[t]=i):delete e[t]}(t,i),this},M.prototype.using=function(t,i,o,g){i=y.resolvePath(i);const v=(t=t.toLowerCase())+"-"+i.hashCode();return d("resource-loader").queue(v,function(){const A=a[v]=this;if("component"===t){const E=I(v);null==E?zuix.load(i,{contextId:v,view:"",priority:-10,ready:P=>{A.end(),o&&o(i,P)},error:()=>{A.end(),o&&o(i,null)}}):(A.end(),o&&o(i,E))}else{const E="style"===t,P=E&&g&&u.dom.getShadowRoot(g.container()||g.view()),q=P||void 0;if(0===r(q).find(t+'[id="'+v+'"]').length()){const G=q||document.head||document.getElementsByTagName("head")[0],V=document.createElement(t);E?(V.type="text/css",V.id=v):(V.type="text/javascript",V.id=v),G.appendChild(V);const B=Z=>{if(E)P&&(Z=Z.replace(/:root/g,":host")),V.styleSheet?V.styleSheet.cssText=Z:V.appendChild(document.createTextNode(Z));else{const te=window.define;window.define=void 0,V.innerText?V.innerText=Z:V.appendChild(document.createTextNode(Z)),window.define=window.define||te}A.end(),o&&o(i,v)},U="_res/"+t+"/"+v,Q=D(U);if(null!=Q)B(E?Q.css:Q.controller);else{const Z=zuix.store("settings")?zuix.store("settings").fetchOptions:g?g.options().fetchOptions:void 0;fetch(i,Z).then(te=>te.text()).then(te=>{f.push({componentId:U,view:null,css:E?te:null,controller:E?null:te,using:i}),B(te)}).catch(()=>{G.removeChild(V),A.end(),o&&o(i,null)})}}else A.end(),o&&o(i,v)}}),this},M.prototype.lazyLoad=function(t,i){return null==t?y.lazyLoad():(y.lazyLoad(t,i),this)},M.prototype.componentize=function(t){return!1===t?R=!0:!0===t&&(R=!1,t=null),R||y.componentize(t),this},M.prototype.store=function(t,i){return null!=i&&(this._store[t]=i),this._store[t]},M.prototype.getResourcePath=t=>function _e(t){let i=zuix.store("config");return null!=i&&null!=i[location.host]&&(i=i[location.host]),!(t=y.resolvePath(t)).startsWith("/")&&t.indexOf("://")<0&&(t=(null!=i&&null!=i.resourcePath?i.resourcePath:"")+t),t}(t),M.prototype.observable=t=>j.observable(t),M.prototype.activeRefresh=(t,i,o,g)=>new S(t,i,o,g),M.prototype.bundle=function(t,i){if(!t)return f;if(t&&"boolean"==typeof t){m.t("bundle:start");const o=y.lazyLoad();if(y.lazyLoad(!1),y.componentize(),i){const g=v=>{setTimeout(()=>{y.willLoadMore()?(m.t("bundle:wait"),v(v)):(m.t("bundle:end"),y.lazyLoad(o),i())},1e3)};g(g)}}else{for(let o=0;o<t.length;o++)t[o].css_applied&&delete t[o].css_applied,"string"==typeof t[o].controller&&(t[o].controller=pe(t[o].controller));f=t}return this},M.prototype.$=r,M.prototype.TaskQueue=l,M.prototype.ObjectObserver=w,M.prototype.ZxQuery=r.ZxQuery,M.prototype.setComponentCache=t=>function K(t){f=t}(t),M.prototype.dumpCache=()=>f,M.prototype.dumpContexts=()=>C,M.prototype.isDirectComponentElement=(t,i)=>oe(t,i),M.prototype.resolveImplicitLoad=t=>{const i=u.dom.cssNot(b.zLoad).get(),o=u.dom.cssNot(b.zReady).get(),g=k.map(v=>v+i+o).join(",");r(t).find(g).each((v,A,E)=>{-1===A.tagName.indexOf("-")&&null==E.attr(b.zLoad)&&E.attr(b.zLoad,"default").attr(b.zLazy,"false")})},M.prototype.runScriptlet=(t,i,o,g)=>{const v=zuix.context(o);if(v&&v._refreshHandler&&i.get().isConnected)return v._refreshHandler.runScriptlet.call(i.get(),i,t,g)},M.prototype.utils=u,F.exports=()=>{if(window&&window.zuix)return window.zuix;const t=new M;if(window&&document){window.zuix=t,t.$.appendCss('[z-view]{display:none;}[type="jscript"],[media*="#"]{display:none;}[z-load][z-ready=true].visible-on-ready{opacity:1}[z-load]:not([z-ready=true]).visible-on-ready{opacity:0;visibility:hidden}',null,"zuix-global");const o=()=>t.componentize();window.ControllerInstance=N,window.addEventListener("load",o),window.addEventListener("resize",o),window.addEventListener("pageshow",o),"loading"!==document.readyState&&o()}return m.monitor(function(i,o){t.monitor&&t.monitor(i,Array.prototype.slice.call(o))}),t}}},be={},Ce=function we(F){var W=be[F];if(void 0!==W)return W.exports;var p=be[F]={exports:{}};return ze[F](p,p.exports,we),p.exports}(693);zuix=Ce}();